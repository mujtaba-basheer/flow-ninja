const nftd=Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0,currency:"USD"}),calculatePhoneTagCost=(a,b)=>{if(isNaN(+a)&&isNaN(+b))return!1;return 12*(20*(+a*(1-+b/100)*15*3))/60},calculateAbandonedCallsCost=(a,b)=>{if(isNaN(+a)&&isNaN(+b))return!1;return 12*(20*(+a*+b*.35*150))/100},calculateNoShowCost=(a,b)=>{if(isNaN(+a)&&isNaN(+b))return!1;return 12*(20*(+a*+b*150))/100},updateSavingsChart=({phone_tag_savings:a,abandoned_calls_savings:b,no_show_savings:d})=>{var e=Math.round;const f=[a,b,d],g=f.reduce((a,b)=>a+b,0);let h=0;const i=f.map(a=>(h+=360*(a/g),h)),j=f.map(a=>{return e(100*(a/g))});let[k,l]=i;$("#savings-pie-chart").css("background-image",`conic-gradient(white ${k}deg, #F4CECE 0 ${l}deg, #C69999 0)`),[k,l]=j,$("span.phone-tag").text(k),$("span.abandoned-calls").text(l),$("span.appointment-no-shows").text(e(100-k-l))},updateRoiChart=({net_profit:a,total_cost:b})=>{let c=100,d=100;b>a?c=a/b*d:d=b/a*c,$(".white-third").css("height",`${c}%`),$(".rose-third").css("height",`${d}%`),$(".third-year-savings").text(": $"+nftd.format(3*a));const e=c/3,f=d/3;$(".white-first").css("height",`${e}%`),$(".rose-first").css("height",`${f}%`),$(".first-year-savings").text("$"+nftd.format(a))},showTotalSavings=({phone_tag_cost:a,abandoned_calls_cost:b,no_show_cost:c})=>{$("#Charts").removeClass("opacity-30");const d=$("#Providers-Start").val()&&+$("#Providers-Start").val()||20;if(isNaN(+d))return;const e=.75*a,f=.3*b,g=.35*c,h=e+f+g,i=2400*d;let j=h/i;j=Math.round(j),$("#Savings").html("$"+nftd.format(h)+`<span class="h3-style">/year</span>`),$("#annual-roi").html(j+`%`),updateSavingsChart({phone_tag_savings:e,abandoned_calls_savings:f,no_show_savings:g}),updateRoiChart({net_profit:h-i,total_cost:i})},validateForm=a=>{const b=document.getElementById(a).querySelectorAll("input");let c=!0;for(const d of b)if(!d.classList.contains("hidden")&&!d.checkValidity()){c=!1;break}return c};function collectFormData(a){const b={options:{debug:!1,map:!0,domain:"klara",router:"free-demo"},form:{}},c=$(a).serializeArray();return c.forEach(function(a){b.form[a.name]=a.value}),b}window.addEventListener("load",function(){var a=Math.round;$("#wf-form-Email-Form-first")[0].reset(),$("#wf-form-Email-Form")[0].reset();let b=!1,c=!1;$("#Providers-Start").on("input",function(a){const c=a.target.value;c?($("#go").removeClass("disabled-button"),b=!0):($("#go").addClass("disabled-button"),$("#hero-form").addClass("hidden"),b=!1)}),$("#go").on("click",function(){b&&$("#hero-form").removeClass("hidden")}),$("#wf-form-Email-Form-first").find("input:not(#Providers):not(.hidden)").each(function(){$(this).on("input",function(){c=validateForm("wf-form-Email-Form-first"),c?$("#roi-details-submit").removeClass("disabled-button"):$("#roi-details-submit").addClass("disabled-button")})}),$("#roi-details-submit").on("click",function(){if(c){$(".disable-div").addClass("disabled-button"),$("#form-two").removeClass("hidden"),$("#small-section").removeClass("hidden");const a={"Providers-Start":$("#Providers-Start").val(),"First-Name-Details-Start":$("#First-Name-Details-Start").val(),"Last-Name-Details-Start":$("#Last-Name-Details-Start").val(),"Email-Details-Start":$("#Email-Details-Start").val(),"Phone-Details-Start":$("#Phone-Details-Start").val(),"Company-Details-Start":$("#Company-Details-Start").val()},b={number_of_providers__c:$("#Providers-Start").val(),FirstName:$("#First-Name-Details-Start").val(),LastName:$("#Last-Name-Details-Start").val(),Email:$("#Email-Details-Start").val(),Phone:$("#Phone-Details-Start").val(),Company:$("#Company-Details-Start").val()};Object.keys(a).forEach(b=>$(`#${b.replace("Start","Show")}`).val(a[b])),fetch("https://api.chilipiper.com/marketing/klara",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({options:{debug:!1,map:!0,domain:"klara",router:"free-demo"},form:b})}).then(a=>{const{status:b}=a;if(200===b||201===b)return a.json();throw new Error(a.statusText)}).then(a=>{console.log(a)}).catch(console.error)}}),$("#show-your-roi").on("click",function(){let a="";a+=`Phone Tag Cost: ${$("#phone-tag-cost").text()}\n`,a+=`Abandoned Calls Cost: ${$("#abandoned-call-cost").text()}\n`,a+=`Appointment No-Show Cost: ${$("#no-show-cost").text()}\n`,a+=`Total Cost Savings: ${$("#Savings").text()}\n`,a+=`ROI on Klara: ${$("#annual-roi").text()}\n`,$("#ROI-Info").val(a),$("#charts-section-old").removeClass("hidden"),$("#what-next").removeClass("disable-next-button")}),$(".see-whats-next-button").on("click",function(){$("#whats-Next").removeClass("book-a-demo-hidden");const a={number_of_providers__c:$("#Providers-Start").val(),FirstName:$("#First-Name-Details-Show").val(),LastName:$("#Last-Name-Details-Show").val(),Email:$("#Email-Details-Show").val(),Phone:$("#Phone-Details-Show").val(),Company:$("#Company-Details-Show").val(),Notes:$("#ROI-Info").val()};ChiliPiper.submit("klara","free-demo",{lead:a,domElement:"#chilipiper-date-picker",injectRootCss:!0})});{let b=400,c=30,d=400,e=10,f=200,g=20,h=50400,i=144e4,j=288e4;const k=`<span class="h3-style">/year</span>`;{$("#Providers-Start").on("input",()=>showTotalSavings({phone_tag_cost:h,abandoned_calls_cost:i,no_show_cost:j}));const d=()=>{let d=calculatePhoneTagCost(b,c);d?(d=a(d),h=d,$("#phone-tag-cost").html("$"+nftd.format(d)+k),$("#phone-tag-cost").addClass("gray-900"),$("#result-div1").removeClass("border-grey-500"),$("#show-your-roi").removeClass("disabled-button"),showTotalSavings({phone_tag_cost:h,abandoned_calls_cost:i,no_show_cost:j})):$("#phone-tag-cost").text("NA")};$("#Calls-make-per-day").on("input",function(){b=$(this).val()||400,d()}),$("#Speaking-with-patient").on("input",function(){c=$(this).val()||30,d()})}{const b=()=>{let b=calculateAbandonedCallsCost(d,e);b?(b=a(b),i=b,$("#abandoned-call-cost").html("$"+nftd.format(b)+k),$("#abandoned-call-cost").addClass("gray-900"),$("#result-div2").removeClass("border-grey-500"),$("#show-your-roi").removeClass("disabled-button"),showTotalSavings({phone_tag_cost:h,abandoned_calls_cost:i,no_show_cost:j})):$("#abandoned-call-cost").text("NA")};$("#Calls-receive-per-day").on("input",function(){d=$(this).val()||400,b()}),$("#Abandoned-calls").on("input",function(){e=$(this).val()||10,b()})}{const b=()=>{let b=calculateNoShowCost(f,g);b?(b=a(b),j=b,$("#no-show-cost").html("$"+nftd.format(b)+k),$("#no-show-cost").addClass("gray-900"),$("#result-div3").removeClass("border-grey-500"),$("#show-your-roi").removeClass("disabled-button"),showTotalSavings({phone_tag_cost:h,abandoned_calls_cost:i,no_show_cost:j})):$("#no-show-cost").text("NA")};$("#Patients-seen-each-day").on("input",function(){f=$(this).val()||200,b()}),$("#No-shows").on("input",function(){g=$(this).val()||20,b()})}}});