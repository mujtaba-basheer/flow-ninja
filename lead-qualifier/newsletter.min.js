const newsLetterFormId="wf-form-Newsletter-Form",validateEmail=a=>(a+"").toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),addToNewsletter=async a=>new Promise((b,c)=>{const d=JSON.stringify({userId:a,userAttributes:{newsletter_signup:!0,email:a}});fetch("https://y9d7yiel60.execute-api.us-east-1.amazonaws.com/test/setUserAttributes",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Content-Length":d.length},body:d}).then(a=>{if(200===a.status)return a.text();throw new Error(a.statusText)}).then(()=>b(null)).catch(a=>{console.log("error",a),c(a)})});window.addEventListener("load",()=>{const a=document.getElementById(newsLetterFormId),b=$(a).parent().find("div.success-message")[0];a.addEventListener("submit",async c=>{c.preventDefault(),c.stopImmediatePropagation(),c.stopPropagation();const d=a.querySelector("input#Email").value;if(!validateEmail(d))return void console.log("email invalid!");try{await addToNewsletter(d),a.style.display="none",b.style.display="block"}catch(a){console.error(a)}})});