window.addEventListener("load",async()=>{const a={jobs:[],filteredJobs:[],filters:{locations:[],teams:[],input:""},dropdowns:{locations:{isFirstRender:!0,values:{selected:[],unselected:[],all:[]}},teams:{isFirstRender:!0,values:{selected:[],unselected:[],all:[]}}}},b=()=>{try{const b=document.querySelector("div.careers-job-list"),c=document.querySelector("div.careers-empty-state"),d=document.getElementById("table-labels");if(b){b.querySelectorAll("a").forEach(a=>a.remove());for(const c of a.filteredJobs){const a=document.createElement("a");a.id=c.id,a.className="careers-table-item w-inline-block",a.href=c.url,a.target="_blank";{const b=document.createElement("div");b.textContent=c.title;const d=document.createElement("div");d.className="font-weight-300",d.textContent=c.team;const e=document.createElement("div");e.className="font-weight-300",e.style.justifySelf="end",e.textContent=c.location,a.appendChild(b),a.appendChild(d),a.appendChild(e)}b.appendChild(a)}const e=document.getElementById("number-of-jobs");e&&(e.textContent=a.filteredJobs.length+""),c&&(a.filteredJobs.length?(c.style.display="none",d.style.display="grid"):(c.style.display="block",d.style.display="none"))}}catch(a){console.error(a)}},c=()=>{let b=[...a.jobs];const{locations:c,teams:d,input:e}=a.filters;b=b.filter(a=>(!c.length||c.includes(a.location))&&(!d.length||d.includes(a.team))&&a.title.toLowerCase().includes(e.toLowerCase()));let f=[];c.length&&c.forEach(a=>f.push(`location=${a}`)),d.length&&d.forEach(a=>f.push(`team=${a}`)),e&&f.push(`search=${e}`),window.history.pushState(null,"",`https://${window.location.hostname}/careers/?${f.join("&")}`),a.filteredJobs=b},d=async()=>{try{const d=new URLSearchParams(window.location.search),e=a.jobs,f=(a,b)=>{const c=new MutationObserver(a=>{for(const c of a){const a=c.target,d=a.classList.contains("w--open");d||h(b)}});c.observe(a,{attributeFilter:["class"],childList:!1})},g=d=>{const{values:{selected:e}}=a.dropdowns[d];a.filters[d]=e;const f=document.getElementById(`${d}-list`),g=f.querySelectorAll("a.active"),h=e.length;try{const a=document.getElementById(`${d}-toggle`),f=a.querySelector(".filter-toggle-text"),g=a.querySelector(".filter-selected-text");if(f&&g)switch(h){case 0:{f.classList.remove("active-toggle"),g.textContent="",g.classList.remove("active");break}case 1:{f.classList.add("active-toggle"),g.textContent=e[0],g.classList.add("active");break}default:{f.classList.add("active-toggle"),g.textContent=`${h} Selections`,g.classList.add("active");break}}c(),b()}catch(a){console.error(a)}},h=b=>{const{values:c}=a.dropdowns[b],d=document.getElementById(`${b}-list`),{selected:e,unselected:f,all:h}=c;d.querySelectorAll("a").forEach(a=>a.remove());for(let c=0;c<h.length;c++){const e=h[c],j=document.createElement("a");j.className="filter-dropdown-link w-inline-block",j.href="#",j.tabIndex=c;{const c=document.createElement("div");c.textContent=e;const d=document.createElement("div");d.className="filter-dropdown-link-close",d.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation();const f=j.classList.contains("active");if(f){j.classList.remove("active"),d.style.display="none";const{values:{selected:c,unselected:f}}=a.dropdowns[b],g=c.findIndex(a=>a===e);c.splice(g,1),f.push(e),f.sort((c,a)=>c.localeCompare(a))}g(b)}),j.appendChild(c),j.appendChild(d)}j.addEventListener("click",c=>{c.preventDefault();const d=j.classList.contains("active");if(!d){j.classList.add("active");const{values:{selected:c,unselected:d}}=a.dropdowns[b],f=d.findIndex(a=>a===e);d.splice(f,1),c.push(e),c.sort((c,a)=>c.localeCompare(a));const g=j.querySelector(".filter-dropdown-link-close");g&&(g.style.display="block")}g(b)}),d.appendChild(j),f.find(a=>a===e)||(j.style.display="none")}const j=d.querySelector(`#${b}-active-filters`);if(j){const c=a=>{d.querySelectorAll("a").forEach(b=>{j.contains(b)||b.textContent!==a||(b.style.display="")})};if(e.length){j.style.display="block";for(let d=0;d<e.length;d++){const f=e[d],h=document.createElement("a");h.className="filter-dropdown-link w-inline-block active",h.href="#",h.tabIndex=d;{const d=document.createElement("div");d.textContent=f;const e=document.createElement("div");e.className="filter-dropdown-link-close",e.style.display="block",e.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation();const{values:{selected:e,unselected:k}}=a.dropdowns[b],l=e.findIndex(a=>a===f);e.splice(l,1),k.push(f),k.sort((c,a)=>c.localeCompare(a)),g(b),h.classList.remove("active"),h.style.display="none",c(f),j.querySelectorAll("a.active").length||(j.style.display="none")}),h.appendChild(d),h.appendChild(e)}j.appendChild(h)}}else j.style.display="none"}a.dropdowns[b].isFirstRender&&(a.dropdowns[b].isFirstRender=!1,g(b))},i=new Set,j=new Set;for(const a of e){const{location:b,team:c}=a;i.add(b),j.add(c)}const k=Array.from(i);k.sort((c,a)=>c.localeCompare(a));const m=d.getAll("location");a.dropdowns.locations.values={selected:[...m],unselected:k.filter(a=>!m.includes(a)),all:[...k]};{const a=document.getElementById("locations-list");a&&(a.querySelectorAll("a").forEach(a=>a.remove()),h("locations"),f(a,"locations"))}const n=Array.from(j);n.sort((c,a)=>c.localeCompare(a));const o=d.getAll("team");a.dropdowns.teams.values={selected:[...o],unselected:n.filter(a=>!o.includes(a)),all:[...n]};{const a=document.getElementById("teams-list");a&&(a.querySelectorAll("a").forEach(a=>a.remove()),h("teams"),f(a,"teams"))}}catch(a){console.error(a)}};{const b=new URLSearchParams(window.location.search),c=b.getAll("location");a.filters.locations=[...c];const d=b.getAll("team");a.filters.teams=[...d];const e=b.get("search");if(e){a.filters.input=e;const b=document.getElementById("careers-search");b&&(b.value=e)}}const e=document.querySelector("div.careers-job-list");if(e){try{const c=await fetch(" https://0a50cfhnal.execute-api.us-east-1.amazonaws.com/sandbox/jobs"),e=await c.json();if(e.status){const c=e.data;c.sort((c,a)=>c.title.localeCompare(a.title)),a.jobs=c,a.filteredJobs=c,b(),d()}else throw new Error(e.msg)}catch(a){console.error(a)}const e=document.getElementById("careers-search");e&&e.addEventListener("input",()=>{const d=e.value.trim();a.filters.input=d,c(),b()})}});