window.addEventListener("load",()=>{const a={items:[],filteredItems:[],filters:{regions:[],types:[],countries:[]},dropdowns:{regions:{values:{selected:[],unselected:[],all:[]},isFirstRender:!0},types:{values:{selected:[],unselected:[],all:[]},isFirstRender:!0},countries:{values:{selected:[],unselected:[],all:[]},isFirstRender:!0}}},b=async()=>{try{const b=a=>{const b=document.getElementById(`${a}-list`);if(b){const c=new MutationObserver(b=>{for(const c of b){const b=c.target,d=b.classList.contains("w--open");d||e(a)}});c.observe(b,{attributeFilter:["class"],childList:!1})}},d=b=>{const{values:{selected:d}}=a.dropdowns[b];a.filters[b]=d.map(a=>a.toLowerCase());const f=document.getElementById(`${b}-list`),g=d.length;try{const f=document.getElementById(`${b}-toggle`),h=f.querySelector(".filter-toggle-text"),i=f.querySelector(".filter-selected-text");if(h&&i)switch(g){case 0:{h.classList.remove("active-toggle"),i.textContent="",i.classList.remove("active");break}case 1:{h.classList.add("active-toggle"),i.textContent=d[0],i.classList.add("active");break}default:{h.classList.add("active-toggle"),i.textContent=`${g} Selections`,i.classList.add("active");break}}if(c(),"types"===b){const d=new Set,f=a.filters[b];if(f.length){for(const b of a.items){let a=!1;for(const c of f)if(b.all_payment_types.set.has(c)){a=!0;break}a&&b.all_consumer_countries.list.forEach(a=>d.add(a))}a.dropdowns.countries.values.unselected=Array.from(d),e("countries")}else a.dropdowns.countries.values.unselected=[...a.dropdowns.countries.values.all],e("countries")}}catch(a){console.error(a)}},e=b=>{const c=document.getElementById(`${b}-list`),{values:e}=a.dropdowns[b],{selected:f,unselected:g,all:h}=e;c.querySelectorAll("a").forEach(a=>a.remove());for(let e=0;e<h.length;e++){const f=h[e],j=document.createElement("a");j.className="filter-dropdown-link w-inline-block",j.href="#",j.tabIndex=e;{const c=document.createElement("div");c.textContent=f;const e=document.createElement("div");e.className="filter-dropdown-link-close",e.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation();const g=j.classList.contains("active");if(g){j.classList.remove("active"),e.style.display="none";const{values:{selected:c,unselected:d}}=a.dropdowns[b],g=c.findIndex(a=>a===f);c.splice(g,1),d.push(f),d.sort((c,a)=>c.localeCompare(a))}d(b)}),j.appendChild(c),j.appendChild(e)}j.addEventListener("click",c=>{c.preventDefault();const e=j.classList.contains("active");if(!e){j.classList.add("active");const{values:{selected:c,unselected:d}}=a.dropdowns[b],e=d.findIndex(a=>a===f);d.splice(e,1),c.push(f),c.sort((c,a)=>c.localeCompare(a));const g=j.querySelector(".filter-dropdown-link-close");g&&(g.style.display="block")}d(b)}),c.appendChild(j),g.find(a=>a===f)||(j.style.display="none")}const j=c.querySelector(`#${b}-active-filters`);if(j){const e=a=>{c.querySelectorAll("a").forEach(b=>{j.contains(b)||b.textContent!==a||(b.style.display="")})};if(f.length){j.style.display="block";for(let c=0;c<f.length;c++){const g=f[c],h=document.createElement("a");h.className="filter-dropdown-link w-inline-block active",h.href="#",h.tabIndex=c;{const c=document.createElement("div");c.textContent=g;const f=document.createElement("div");f.className="filter-dropdown-link-close",f.style.display="block",f.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation();const{values:{selected:f,unselected:k}}=a.dropdowns[b],l=f.findIndex(a=>a===g);f.splice(l,1),k.push(g),k.sort((c,a)=>c.localeCompare(a)),d(b),h.classList.remove("active"),h.style.display="none",e(g),j.querySelectorAll("a.active").length||(j.style.display="none")}),h.appendChild(c),h.appendChild(f)}j.appendChild(h)}}else j.style.display="none"}a.dropdowns[b].isFirstRender&&(a.dropdowns[b].isFirstRender=!1,d(b))};for(const a of["regions","countries","types"]){const c=document.getElementById(`${a}-list`);c&&(c.querySelectorAll("a").forEach(a=>a.remove()),e(a),b(a))}const f=document.getElementById("clear-all");f&&f.addEventListener("click",()=>{for(const b of["regions","types","countries"]){const{values:c}=a.dropdowns[b];c.selected=[],c.unselected=[...c.all],a.filters[b]=[],e(b),d(b)}})}catch(a){console.error(a)}},c=()=>{const{regions:b,countries:c,types:d}=a.filters;let e=0,f=!1;for(const g of a.items){let a=!0;if(b.length){let c=!1;f=!0;for(const a of b)if(g.all_regions.set.has(a)){c=!0;break}a=c}if(c.length&&(f=!0,a)){let b=!1;for(const a of c)if(g.all_consumer_countries.set.has(a)){b=!0;break}a=b}if(d.length&&(f=!0,a)){let b=!1;for(const a of d)if(g.all_payment_types.set.has(a)){b=!0;break}a=b}a&&e++,g.element.style.display=a?"block":"none"}let g=[];b.length&&b.forEach(a=>g.push(`region=${encodeURIComponent(a)}`)),c.length&&c.forEach(a=>g.push(`consumerCountry=${encodeURIComponent(a)}`)),d.length&&d.forEach(a=>g.push(`paymentType=${encodeURIComponent(a)}`)),window.history.pushState(null,"",`https://${window.location.hostname}/payment-method/accept/?${g.join("&")}`);const h=document.getElementById("number-of-methods");h&&(h.textContent=e+"");const i=document.querySelector(".payments-empty-state");i&&(i.style.display=e?"none":"block");const j=document.getElementById("clear-all");j&&(j.style.display=f?"block":"none")};{const c=new URLSearchParams(window.location.search),d={regions:"region",types:"paymentType",countries:"consumerCountry"};for(const b of["regions","types"]){const e=document.getElementById(`${b}-list`);if(e){const f=e.querySelectorAll("a"),g=[];f.forEach(a=>{a.textContent&&g.push(a.textContent.trim())});const h=c.getAll(d[b]);a.dropdowns[b].values={selected:g.filter(a=>h.includes(a.toLowerCase())),unselected:g.filter(a=>!h.includes(a.toLowerCase())),all:[...g]},a.filters[b]=[...h]}}{const b=["Afghanistan","Aland Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antigua & Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia & Herzegovina","Botswana","Bouvet Island","Brazil","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Chad","Chile","China","Colombia","Comoros","Congo-Brazzaville","Congo-Kinshasa","Cook Islands","Costa Rica","C\xF4te D'Ivoire","Croatia","Curacao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","eSwatini","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guatemala","Guernsey","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lesotho","Liberia","Liechtenstein","Lithuania","Luxembourg","Macao","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn Islands","Poland","Portugal","Puerto Rico","Qatar","R\xE9union","Romania","Russia","Rwanda","Samoa","San Marino","S\xE3o Tom\xE9 & Pr\xEDncipe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","St. Helena","St. Kitts & Nevis","St. Lucia","St. Pierre & Miquelon","St. Vincent & Grenadines","Suriname","Svalbard & Jan Mayen","Swaziland","Sweden","Switzerland","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad & Tobago","Tunisia","Turkey","Turkmenistan","Turks & Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Vanuatu","Vatican City","Venezuela","Vietnam","Wallis & Futuna","Yemen","Zambia","Zimbabwe"],e=c.getAll(d.countries);a.dropdowns.countries.values={selected:b.filter(a=>e.includes(a.toLowerCase())),unselected:b.filter(a=>!e.includes(a.toLowerCase())),all:[...b]},a.filters.countries=[...e]}const e=document.querySelectorAll("div.payments-list .payments-item"),f=[];for(let a=0;a<e.length;a++){const b=e.item(a),c={list:[],set:new Set},d=b.querySelectorAll("#region-wrapper > .w-dyn-item div"),g=new Set;d.forEach(a=>{const b=a.textContent;b&&g.add(b)}),c.list=Array.from(g),c.set=new Set(c.list.map(a=>a.toLowerCase()));const h={list:[],set:new Set},i=b.querySelector("div#consumer-countries-list");if(i){const a=new Set,b=i.textContent;if(b){const c=b.split(",").map(a=>a.trim());c.forEach(b=>a.add(b))}h.list=Array.from(a),h.set=new Set(h.list.map(a=>a.toLowerCase()))}const j={list:[],set:new Set},k=b.querySelector("div#payment-type");if(k){const a=new Set,b=k.textContent;if(b){const c=b.split(",").map(a=>a.trim());c.forEach(b=>a.add(b))}j.list=Array.from(a),j.set=new Set(j.list.map(a=>a.toLowerCase()))}f.push({all_consumer_countries:h,all_regions:c,all_payment_types:j,element:b})}a.items=[...f],b()}c()});