window.addEventListener("load",()=>{const a=["cost","cpm","impression"],b={active:new Set,disabled:null,values:{cost:null,cpm:null,impression:null}},c=document.querySelector("#wf-form-Conversion-Form"),d=document.querySelector("div.calculator-results-wrapper"),e=document.getElementById("reset-button"),f=document.querySelector("div.conversion-rate-section");c.reset();const g=a=>{const b=document.querySelector("div.calc-info");a?(b.style.display="block",document.getElementById("calcField").textContent=a):b.style.display="none"},h=()=>{c.reset(),a.forEach(a=>{const c=document.getElementById(a);c.classList.remove("disabled"),c.setAttribute("required","true"),b.values[a]=null}),b.active.clear(),b.disabled=null},i=(c,d)=>{if(!c)b.disabled=null,b.active.delete(d),b.values[d]=null;else if(isNaN(+c)||(b.values[d]=+c),b.active.add(d),2===[...b.active].length){let c=null;for(const d of a)if(!b.active.has(d)){c=d;break}b.disabled=c}a.forEach(a=>{const c=document.getElementById(a);return b.disabled&&b.disabled===a?(c.classList.add("disabled"),void c.removeAttribute("required")):void(c.classList.remove("disabled"),c.setAttribute("required","true"))}),g(b.disabled)};a.forEach(a=>{const b=document.getElementById(a);b.addEventListener("input",()=>i(b.value,a))}),c.addEventListener("submit",e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();let{cpm:g,cost:i,impression:j}=b.values;if(null===g)g=1e3*(i/j),b.values.cpm=g;else if(null===i)i=g*j/1e3,b.values.cost=i;else if(null===j)j=1e3*(i/g),b.values.impression=j;else return;c.style.display="none",d.style.display="block",f.style.display="flex";for(const c of a)document.getElementById(`${c}Result`).textContent=b.values[c].toFixed(2)+"";h()}),e.addEventListener("click",()=>{c.style.display="grid",d.style.display="none"})});