/*!
 * matter-js 0.19.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 */!function(i,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Matter",[],e):"object"==typeof exports?exports.Matter=e():i.Matter=e()}(this,function(){var e=Math.PI,g=Math.ceil,B=Number.MAX_VALUE,_=Math.max,K=Math.min,$=Math.abs,ee=Math.sin,te=Math.cos,ie=Math.sqrt,oe=Math.floor;return function(s){function a(t){if(e[t])return e[t].exports;var i=e[t]={i:t,l:!1,exports:{}};return s[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}var e={};return a.m=s,a.c=e,a.d=function(o,e,t){a.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:t})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(n,s){if(1&s&&(n=a(n)),8&s)return n;if(4&s&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&s&&"string"!=typeof n)for(var i in n)a.d(t,i,function(e){return n[e]}.bind(null,i));return t},a.n=function(i){var e=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(e,"a",e),e},a.o=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)},a.p="",a(a.s=20)}([function(t){var d={};t.exports=d,function(){d._baseDelta=1e3/60,d._nextId=0,d._seed=0,d._nowStartTime=+new Date,d._warnedOnce={},d._decomp=null,d.extend=function(n,e){var t,l;"boolean"==typeof e?(t=2,l=e):(t=1,l=!0);for(var p,c=t;c<arguments.length;c++)if(p=arguments[c],p)for(var y in p)l&&p[y]&&p[y].constructor===Object?n[y]&&n[y].constructor!==Object?n[y]=p[y]:(n[y]=n[y]||{},d.extend(n[y],l,p[y])):n[y]=p[y];return n},d.clone=function(i,e){return d.extend({},e,i)},d.keys=function(i){if(Object.keys)return Object.keys(i);var e=[];for(var t in i)e.push(t);return e},d.values=function(s){var e=[];if(Object.keys){for(var t=Object.keys(s),n=0;n<t.length;n++)e.push(s[t[n]]);return e}for(var a in s)e.push(s[a]);return e},d.get=function(s,a,r,n){a=a.split(".").slice(r,n);for(var i=0;i<a.length;i+=1)s=s[a[i]];return s},d.set=function(n,e,t,i,o){var s=e.split(".").slice(i,o);return d.get(n,e,0,-1)[s[s.length-1]]=t,t},d.shuffle=function(n){for(var e=n.length-1;0<e;e--){var s=oe(d.random()*(e+1)),i=n[e];n[e]=n[s],n[s]=i}return n},d.choose=function(t){return t[oe(d.random()*t.length)]},d.isElement=function(t){return"undefined"==typeof HTMLElement?!!(t&&t.nodeType&&t.nodeName):t instanceof HTMLElement},d.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},d.isFunction=function(t){return"function"==typeof t},d.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},d.isString=function(t){return"[object String]"===toString.call(t)},d.clamp=function(i,e,t){return i<e?e:i>t?t:i},d.sign=function(t){return 0>t?-1:1},d.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-d._nowStartTime},d.random=function(e,o){return o=void 0===o?1:o,(e=void 0===e?0:e)+i()*(o-e)};var i=function(){return d._seed=(9301*d._seed+49297)%233280,d._seed/233280};d.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},d.logLevel=1,d.log=function(){console&&0<d.logLevel&&3>=d.logLevel&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.info=function(){console&&0<d.logLevel&&2>=d.logLevel&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warn=function(){console&&0<d.logLevel&&3>=d.logLevel&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warnOnce=function(){var t=Array.prototype.slice.call(arguments).join(" ");d._warnedOnce[t]||(d.warn(t),d._warnedOnce[t]=!0)},d.deprecated=function(o,e,t){o[e]=d.chain(function(){d.warnOnce("\uD83D\uDD05 deprecated \uD83D\uDD05",t)},o[e])},d.nextId=function(){return d._nextId++},d.indexOf=function(i,e){if(i.indexOf)return i.indexOf(e);for(var t=0;t<i.length;t++)if(i[t]===e)return t;return-1},d.map=function(o,e){if(o.map)return o.map(e);for(var t=[],n=0;n<o.length;n+=1)t.push(e(o[n]));return t},d.topologicalSort=function(n){var e=[],t=[],i=[];for(var o in n)t[o]||i[o]||d._topologicalSort(o,t,i,n,e);return e},d._topologicalSort=function(n,e,t,i,o){var r=i[n]||[];t[n]=!0;for(var a,p=0;p<r.length;p+=1)a=r[p],t[a]||e[a]||d._topologicalSort(a,e,t,i,o);t[n]=!1,e[n]=!0,o.push(n)},d.chain=function(){for(var o,s=[],e=0;e<arguments.length;e+=1)o=arguments[e],o._chained?s.push.apply(s,o._chained):s.push(o);var a=function(){for(var e,a=Array(arguments.length),n=0,l=arguments.length;n<l;n++)a[n]=arguments[n];for(n=0;n<s.length;n+=1){var o=s[n].apply(e,a);void 0!==o&&(e=o)}return e};return a._chained=s,a},d.chainPathBefore=function(o,e,t){return d.set(o,e,d.chain(t,d.get(o,e)))},d.chainPathAfter=function(o,e,t){return d.set(o,e,d.chain(d.get(o,e),t))},d.setDecomp=function(t){d._decomp=t},d.getDecomp=function(){var i=d._decomp;try{i||"undefined"==typeof window||(i=window.decomp),i||"undefined"==typeof global||(i=global.decomp)}catch(e){i=null}return i}}()},function(t){var i={};t.exports=i,i.create=function(o){var e={min:{x:0,y:0},max:{x:0,y:0}};return o&&i.update(e,o),e},i.update=function(s,e,t){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var n,a=0;a<e.length;a++)n=e[a],n.x>s.max.x&&(s.max.x=n.x),n.x<s.min.x&&(s.min.x=n.x),n.y>s.max.y&&(s.max.y=n.y),n.y<s.min.y&&(s.min.y=n.y);t&&(0<t.x?s.max.x+=t.x:s.min.x+=t.x,0<t.y?s.max.y+=t.y:s.min.y+=t.y)},i.contains=function(i,e){return e.x>=i.min.x&&e.x<=i.max.x&&e.y>=i.min.y&&e.y<=i.max.y},i.overlaps=function(i,e){return i.min.x<=e.max.x&&i.max.x>=e.min.x&&i.max.y>=e.min.y&&i.min.y<=e.max.y},i.translate=function(i,e){i.min.x+=e.x,i.max.x+=e.x,i.min.y+=e.y,i.max.y+=e.y},i.shift=function(o,e){var t=o.max.x-o.min.x,n=o.max.y-o.min.y;o.min.x=e.x,o.max.x=e.x+t,o.min.y=e.y,o.max.y=e.y+n}},function(t){var i={};t.exports=i,i.create=function(i,e){return{x:i||0,y:e||0}},i.clone=function(t){return{x:t.x,y:t.y}},i.magnitude=function(t){return ie(t.x*t.x+t.y*t.y)},i.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},i.rotate=function(s,e,t){var a=te(e),i=ee(e);t||(t={});var o=s.x*a-s.y*i;return t.y=s.x*i+s.y*a,t.x=o,t},i.rotateAbout=function(s,e,t,n){var l=te(e),o=ee(e);n||(n={});var r=t.x+((s.x-t.x)*l-(s.y-t.y)*o);return n.y=t.y+((s.x-t.x)*o+(s.y-t.y)*l),n.x=r,n},i.normalise=function(o){var e=i.magnitude(o);return 0===e?{x:0,y:0}:{x:o.x/e,y:o.y/e}},i.dot=function(i,e){return i.x*e.x+i.y*e.y},i.cross=function(i,e){return i.x*e.y-i.y*e.x},i.cross3=function(i,e,t){return(e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x)},i.add=function(i,e,t){return t||(t={}),t.x=i.x+e.x,t.y=i.y+e.y,t},i.sub=function(i,e,t){return t||(t={}),t.x=i.x-e.x,t.y=i.y-e.y,t},i.mult=function(i,e){return{x:i.x*e,y:i.y*e}},i.div=function(i,e){return{x:i.x/e,y:i.y/e}},i.perp=function(i,e){return{x:(e=!0===e?-1:1)*-i.y,y:e*i.x}},i.neg=function(t){return{x:-t.x,y:-t.y}},i.angle=function(i,e){return Math.atan2(e.y-i.y,e.x-i.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]},function(s,e,t){var d={};s.exports=d;var P=t(2),o=t(0);d.create=function(s,e){for(var t=[],n=0;n<s.length;n++){var a=s[n],o={x:a.x,y:a.y,index:n,body:e,isInternal:!1};t.push(o)}return t},d.fromPath=function(i,e){var o=[];return i.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,function(n,e,t){o.push({x:parseFloat(e),y:parseFloat(t)})}),d.create(o,e)},d.centre=function(i){for(var e,o,p,c=d.area(i,!0),a={x:0,y:0},y=0;y<i.length;y++)p=(y+1)%i.length,e=P.cross(i[y],i[p]),o=P.mult(P.add(i[y],i[p]),e),a=P.add(a,o);return P.div(a,6*c)},d.mean=function(i){for(var e={x:0,y:0},t=0;t<i.length;t++)e.x+=i[t].x,e.y+=i[t].y;return P.div(e,i.length)},d.area=function(s,e){for(var t=0,a=s.length-1,r=0;r<s.length;r++)t+=(s[a].x-s[r].x)*(s[a].y+s[r].y),a=r;return e?t/2:$(t)/2},d.inertia=function(o,e){for(var t,d,p=0,c=0,y=o,s=0;s<y.length;s++)d=(s+1)%y.length,p+=(t=$(P.cross(y[d],y[s])))*(P.dot(y[d],y[d])+P.dot(y[d],y[s])+P.dot(y[s],y[s])),c+=t;return e/6*(p/c)},d.translate=function(s,e,t){t=void 0===t?1:t;var l,d=s.length,o=e.x*t,r=e.y*t;for(l=0;l<d;l++)s[l].x+=o,s[l].y+=r;return s},d.rotate=function(p,e,t){if(0!==e){var n,y,g,m,x=te(e),s=ee(e),l=t.x,c=t.y,u=p.length;for(m=0;m<u;m++)y=(n=p[m]).x-l,g=n.y-c,n.x=l+(y*x-g*s),n.y=c+(y*s+g*x);return p}},d.contains=function(l,e){for(var t,d=e.x,i=e.y,o=l.length,r=l[o-1],p=0;p<o;p++){if(t=l[p],0<(d-r.x)*(t.y-r.y)+(i-r.y)*(r.x-t.x))return!1;r=t}return!0},d.scale=function(i,e,t,o){if(1===e&&1===t)return i;var n,p;o=o||d.centre(i);for(var c=0;c<i.length;c++)n=i[c],p=P.sub(n,o),i[c].x=o.x+p.x*e,i[c].y=o.y+p.y*t;return i},d.chamfer=function(r,e,A,w,C){var B=Math.pow;e="number"==typeof e?[e]:e||[8],A=void 0===A?-1:A,w=w||2,C=C||14;for(var _=[],s=0;s<r.length;s++){var I=r[0<=s-1?s-1:r.length-1],c=r[s],u=r[(s+1)%r.length],d=e[s<e.length?s:e.length-1];if(0!==d){var p=P.normalise({x:c.y-I.y,y:I.x-c.x}),f=P.normalise({x:u.y-c.y,y:c.x-u.x}),v=ie(2*B(d,2)),y=P.mult(o.clone(p),d),m=P.normalise(P.mult(P.add(p,f),.5)),g=P.sub(c,P.mult(m,v)),x=A;-1===A&&(x=1.75*B(d,.32)),1==(x=o.clamp(x,w,C))%2&&(x+=1);for(var T=Math.acos(P.dot(p,f))/x,b=0;b<x;b++)_.push(P.add(P.rotate(y,T*b),g))}else _.push(c)}return _},d.clockwiseSort=function(i){var o=d.mean(i);return i.sort(function(t,e){return P.angle(o,t)-P.angle(o,e)}),i},d.isConvex=function(s){var e,l,d,p,c=0,y=s.length;if(3>y)return null;for(e=0;e<y;e++)if(d=(e+2)%y,p=(s[l=(e+1)%y].x-s[e].x)*(s[d].y-s[l].y),0>(p-=(s[l].y-s[e].y)*(s[d].x-s[l].x))?c|=1:0<p&&(c|=2),3===c)return!1;return 0!=c||null},d.hull=function(o){var s,a,l=[],i=[];for((o=o.slice(0)).sort(function(i,e){var t=i.x-e.x;return 0==t?i.y-e.y:t}),a=0;a<o.length;a+=1){for(s=o[a];2<=i.length&&0>=P.cross3(i[i.length-2],i[i.length-1],s);)i.pop();i.push(s)}for(a=o.length-1;0<=a;a-=1){for(s=o[a];2<=l.length&&0>=P.cross3(l[l.length-2],l[l.length-1],s);)l.pop();l.push(s)}return l.pop(),i.pop(),l.concat(i)}},function(d,e,t){var y={};d.exports=y;var p=t(3),g=t(2),i=t(7),o=t(0),m=t(1),l=t(11);!function(){y._timeCorrection=!0,y._inertiaScale=4,y._nextCollidingGroupId=1,y._nextNonCollidingGroupId=-1,y._nextCategory=1,y._baseDelta=1e3/60,y.create=function(e){var t={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:p.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:1e3/60,_original:null},n=o.extend(t,e);return s(n,e),n},y.nextGroup=function(t){return t?y._nextNonCollidingGroupId--:y._nextCollidingGroupId++},y.nextCategory=function(){return y._nextCategory<<=1,y._nextCategory};var s=function(i,e){e=e||{},y.set(i,{bounds:i.bounds||m.create(i.vertices),positionPrev:i.positionPrev||g.clone(i.position),anglePrev:i.anglePrev||i.angle,vertices:i.vertices,parts:i.parts||[i],isStatic:i.isStatic,isSleeping:i.isSleeping,parent:i.parent||i}),p.rotate(i.vertices,i.angle,i.position),l.rotate(i.axes,i.angle),m.update(i.bounds,i.vertices,i.velocity),y.set(i,{axes:e.axes||i.axes,area:e.area||i.area,mass:e.mass||i.mass,inertia:e.inertia||i.inertia});var s=i.isStatic?"#14151f":o.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),n=i.isStatic?"#555":"#ccc",a=i.isStatic&&null===i.render.fillStyle?1:0;i.render.fillStyle=i.render.fillStyle||s,i.render.strokeStyle=i.render.strokeStyle||n,i.render.lineWidth=i.render.lineWidth||a,i.render.sprite.xOffset+=-(i.bounds.min.x-i.position.x)/(i.bounds.max.x-i.bounds.min.x),i.render.sprite.yOffset+=-(i.bounds.min.y-i.position.y)/(i.bounds.max.y-i.bounds.min.y)};y.set=function(s,e,a){for(var r in"string"==typeof e&&(r=e,(e={})[r]=a),e)if(Object.prototype.hasOwnProperty.call(e,r))switch(a=e[r],r){case"isStatic":y.setStatic(s,a);break;case"isSleeping":i.set(s,a);break;case"mass":y.setMass(s,a);break;case"density":y.setDensity(s,a);break;case"inertia":y.setInertia(s,a);break;case"vertices":y.setVertices(s,a);break;case"position":y.setPosition(s,a);break;case"angle":y.setAngle(s,a);break;case"velocity":y.setVelocity(s,a);break;case"angularVelocity":y.setAngularVelocity(s,a);break;case"speed":y.setSpeed(s,a);break;case"angularSpeed":y.setAngularSpeed(s,a);break;case"parts":y.setParts(s,a);break;case"centre":y.setCentre(s,a);break;default:s[r]=a;}},y.setStatic=function(o,e){for(var t,s=0;s<o.parts.length;s++)t=o.parts[s],t.isStatic=e,e?(t._original={restitution:t.restitution,friction:t.friction,mass:t.mass,inertia:t.inertia,density:t.density,inverseMass:t.inverseMass,inverseInertia:t.inverseInertia},t.restitution=0,t.friction=1,t.mass=t.inertia=t.density=1/0,t.inverseMass=t.inverseInertia=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.angularVelocity=0,t.speed=0,t.angularSpeed=0,t.motion=0):t._original&&(t.restitution=t._original.restitution,t.friction=t._original.friction,t.mass=t._original.mass,t.inertia=t._original.inertia,t.density=t._original.density,t.inverseMass=t._original.inverseMass,t.inverseInertia=t._original.inverseInertia,t._original=null)},y.setMass=function(i,e){var t=i.inertia/(i.mass/6);i.inertia=t*(e/6),i.inverseInertia=1/i.inertia,i.mass=e,i.inverseMass=1/i.mass,i.density=i.mass/i.area},y.setDensity=function(i,e){y.setMass(i,e*i.area),i.density=e},y.setInertia=function(i,e){i.inertia=e,i.inverseInertia=1/i.inertia},y.setVertices=function(i,e){i.vertices=e[0].body===i?e:p.create(e,i),i.axes=l.fromVertices(i.vertices),i.area=p.area(i.vertices),y.setMass(i,i.density*i.area);var t=p.centre(i.vertices);p.translate(i.vertices,t,-1),y.setInertia(i,y._inertiaScale*p.inertia(i.vertices,i.mass)),p.translate(i.vertices,i.position),m.update(i.bounds,i.vertices,i.velocity)},y.setParts=function(i,e,o){var d;for(e=e.slice(0),i.parts.length=0,i.parts.push(i),i.parent=i,d=0;d<e.length;d++){var g=e[d];g!==i&&(g.parent=i,i.parts.push(g))}if(1!==i.parts.length){if(o=void 0===o||o){var a=[];for(d=0;d<e.length;d++)a=a.concat(e[d].vertices);p.clockwiseSort(a);var m=p.hull(a),l=p.centre(m);y.setVertices(i,m),p.translate(i.vertices,l)}var c=y._totalProperties(i);i.area=c.area,i.parent=i,i.position.x=c.centre.x,i.position.y=c.centre.y,i.positionPrev.x=c.centre.x,i.positionPrev.y=c.centre.y,y.setMass(i,c.mass),y.setInertia(i,c.inertia),y.setPosition(i,c.centre)}},y.setCentre=function(i,e,t){t?(i.positionPrev.x+=e.x,i.positionPrev.y+=e.y,i.position.x+=e.x,i.position.y+=e.y):(i.positionPrev.x=e.x-(i.position.x-i.positionPrev.x),i.positionPrev.y=e.y-(i.position.y-i.positionPrev.y),i.position.x=e.x,i.position.y=e.y)},y.setPosition=function(o,e,t){var n=g.sub(e,o.position);t?(o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.velocity.x=n.x,o.velocity.y=n.y,o.speed=g.magnitude(n)):(o.positionPrev.x+=n.x,o.positionPrev.y+=n.y);for(var i,r=0;r<o.parts.length;r++)i=o.parts[r],i.position.x+=n.x,i.position.y+=n.y,p.translate(i.vertices,n),m.update(i.bounds,i.vertices,o.velocity)},y.setAngle=function(o,e,t){var n=e-o.angle;t?(o.anglePrev=o.angle,o.angularVelocity=n,o.angularSpeed=$(n)):o.anglePrev+=n;for(var i,r=0;r<o.parts.length;r++)i=o.parts[r],i.angle+=n,p.rotate(i.vertices,n,o.position),l.rotate(i.axes,n),m.update(i.bounds,i.vertices,o.velocity),0<r&&g.rotateAbout(i.position,n,o.position,i.position)},y.setVelocity=function(i,e){var t=i.deltaTime/y._baseDelta;i.positionPrev.x=i.position.x-e.x*t,i.positionPrev.y=i.position.y-e.y*t,i.velocity.x=(i.position.x-i.positionPrev.x)/t,i.velocity.y=(i.position.y-i.positionPrev.y)/t,i.speed=g.magnitude(i.velocity)},y.getVelocity=function(i){var e=y._baseDelta/i.deltaTime;return{x:(i.position.x-i.positionPrev.x)*e,y:(i.position.y-i.positionPrev.y)*e}},y.getSpeed=function(t){return g.magnitude(y.getVelocity(t))},y.setSpeed=function(i,e){y.setVelocity(i,g.mult(g.normalise(y.getVelocity(i)),e))},y.setAngularVelocity=function(i,e){var t=i.deltaTime/y._baseDelta;i.anglePrev=i.angle-e*t,i.angularVelocity=(i.angle-i.anglePrev)/t,i.angularSpeed=$(i.angularVelocity)},y.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*y._baseDelta/t.deltaTime},y.getAngularSpeed=function(t){return $(y.getAngularVelocity(t))},y.setAngularSpeed=function(i,e){y.setAngularVelocity(i,o.sign(y.getAngularVelocity(i))*e)},y.translate=function(i,e,t){y.setPosition(i,g.add(i.position,e),t)},y.rotate=function(i,e,t,n){if(t){var o=te(e),r=ee(e),a=i.position.x-t.x,s=i.position.y-t.y;y.setPosition(i,{x:t.x+(a*o-s*r),y:t.y+(a*r+s*o)},n),y.setAngle(i,i.angle+e,n)}else y.setAngle(i,i.angle+e,n)},y.scale=function(i,e,t,o){var n=0,c=0;o=o||i.position;for(var g,x=0;x<i.parts.length;x++)g=i.parts[x],p.scale(g.vertices,e,t,o),g.axes=l.fromVertices(g.vertices),g.area=p.area(g.vertices),y.setMass(g,i.density*g.area),p.translate(g.vertices,{x:-g.position.x,y:-g.position.y}),y.setInertia(g,y._inertiaScale*p.inertia(g.vertices,g.mass)),p.translate(g.vertices,{x:g.position.x,y:g.position.y}),0<x&&(n+=g.area,c+=g.inertia),g.position.x=o.x+(g.position.x-o.x)*e,g.position.y=o.y+(g.position.y-o.y)*t,m.update(g.bounds,g.vertices,i.velocity);1<i.parts.length&&(i.area=n,i.isStatic||(y.setMass(i,i.density*n),y.setInertia(i,c))),i.circleRadius&&(e===t?i.circleRadius*=e:i.circleRadius=null)},y.update=function(i,e){var s=(e=(void 0===e?1e3/60:e)*i.timeScale)*e,n=y._timeCorrection?e/(i.deltaTime||e):1,a=1-i.frictionAir*(e/o._baseDelta),r=(i.position.x-i.positionPrev.x)*n,d=(i.position.y-i.positionPrev.y)*n;i.velocity.x=r*a+i.force.x/i.mass*s,i.velocity.y=d*a+i.force.y/i.mass*s,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.position.x+=i.velocity.x,i.position.y+=i.velocity.y,i.deltaTime=e,i.angularVelocity=(i.angle-i.anglePrev)*a*n+i.torque/i.inertia*s,i.anglePrev=i.angle,i.angle+=i.angularVelocity;for(var c,u=0;u<i.parts.length;u++)c=i.parts[u],p.translate(c.vertices,i.velocity),0<u&&(c.position.x+=i.velocity.x,c.position.y+=i.velocity.y),0!==i.angularVelocity&&(p.rotate(c.vertices,i.angularVelocity,i.position),l.rotate(c.axes,i.angularVelocity),0<u&&g.rotateAbout(c.position,i.angularVelocity,i.position,c.position)),m.update(c.bounds,c.vertices,i.velocity)},y.updateVelocities=function(i){var e=y._baseDelta/i.deltaTime,t=i.velocity;t.x=(i.position.x-i.positionPrev.x)*e,t.y=(i.position.y-i.positionPrev.y)*e,i.speed=ie(t.x*t.x+t.y*t.y),i.angularVelocity=(i.angle-i.anglePrev)*e,i.angularSpeed=$(i.angularVelocity)},y.applyForce=function(s,e,t){var n=e.x-s.position.x,i=e.y-s.position.y;s.force.x+=t.x,s.force.y+=t.y,s.torque+=n*t.y-i*t.x},y._totalProperties=function(s){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},t=1===s.parts.length?0:1;t<s.parts.length;t++){var a=s.parts[t],i=a.mass===1/0?1:a.mass;e.mass+=i,e.area+=a.area,e.inertia+=a.inertia,e.centre=g.add(e.centre,g.mult(a.position,i))}return e.centre=g.div(e.centre,e.mass),e}}()},function(s,e,t){var n={};s.exports=n;var d=t(0);n.on=function(s,e,t){for(var n,a=e.split(" "),o=0;o<a.length;o++)n=a[o],s.events=s.events||{},s.events[n]=s.events[n]||[],s.events[n].push(t);return t},n.off=function(o,e,p){if(e){"function"==typeof e&&(p=e,e=d.keys(o.events).join(" "));for(var c=e.split(" "),i=0;i<c.length;i++){var y=o.events[c[i]],a=[];if(p&&y)for(var s=0;s<y.length;s++)y[s]!==p&&a.push(y[s]);o.events[c[i]]=a}}else o.events={}},n.trigger=function(o,e,t){var p,y,g,m,x=o.events;if(x&&0<d.keys(x).length){t||(t={}),p=e.split(" ");for(var l=0;l<p.length;l++)if(g=x[y=p[l]]){(m=d.clone(t,!1)).name=y,m.source=o;for(var h=0;h<g.length;h++)g[h].apply(o,[m])}}}},function(l,e,t){var y={};l.exports=y;var i=t(5),d=t(0),p=t(1),g=t(4);y.create=function(t){return d.extend({id:d.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},t)},y.setModified=function(i,e,t,n){if(i.isModified=e,e&&i.cache&&(i.cache.allBodies=null,i.cache.allConstraints=null,i.cache.allComposites=null),t&&i.parent&&y.setModified(i.parent,e,t,n),n)for(var o,s=0;s<i.composites.length;s++)o=i.composites[s],y.setModified(o,e,t,n)},y.add=function(o,e){var t=[].concat(e);i.trigger(o,"beforeAdd",{object:e});for(var n,r=0;r<t.length;r++)switch(n=t[r],n.type){case"body":if(n.parent!==n){d.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}y.addBody(o,n);break;case"constraint":y.addConstraint(o,n);break;case"composite":y.addComposite(o,n);break;case"mouseConstraint":y.addConstraint(o,n.constraint);}return i.trigger(o,"afterAdd",{object:e}),o},y.remove=function(o,e,t){var n=[].concat(e);i.trigger(o,"beforeRemove",{object:e});for(var r,l=0;l<n.length;l++)switch(r=n[l],r.type){case"body":y.removeBody(o,r,t);break;case"constraint":y.removeConstraint(o,r,t);break;case"composite":y.removeComposite(o,r,t);break;case"mouseConstraint":y.removeConstraint(o,r.constraint);}return i.trigger(o,"afterRemove",{object:e}),o},y.addComposite=function(i,e){return i.composites.push(e),e.parent=i,y.setModified(i,!0,!0,!1),i},y.removeComposite=function(i,e,t){var n=d.indexOf(i.composites,e);if(-1!==n&&y.removeCompositeAt(i,n),t)for(var o=0;o<i.composites.length;o++)y.removeComposite(i.composites[o],e,!0);return i},y.removeCompositeAt=function(i,e){return i.composites.splice(e,1),y.setModified(i,!0,!0,!1),i},y.addBody=function(i,e){return i.bodies.push(e),y.setModified(i,!0,!0,!1),i},y.removeBody=function(i,e,t){var n=d.indexOf(i.bodies,e);if(-1!==n&&y.removeBodyAt(i,n),t)for(var o=0;o<i.composites.length;o++)y.removeBody(i.composites[o],e,!0);return i},y.removeBodyAt=function(i,e){return i.bodies.splice(e,1),y.setModified(i,!0,!0,!1),i},y.addConstraint=function(i,e){return i.constraints.push(e),y.setModified(i,!0,!0,!1),i},y.removeConstraint=function(i,e,t){var n=d.indexOf(i.constraints,e);if(-1!==n&&y.removeConstraintAt(i,n),t)for(var o=0;o<i.composites.length;o++)y.removeConstraint(i.composites[o],e,!0);return i},y.removeConstraintAt=function(i,e){return i.constraints.splice(e,1),y.setModified(i,!0,!0,!1),i},y.clear=function(i,e,t){if(t)for(var n=0;n<i.composites.length;n++)y.clear(i.composites[n],e,!0);return e?i.bodies=i.bodies.filter(function(t){return t.isStatic}):i.bodies.length=0,i.constraints.length=0,i.composites.length=0,y.setModified(i,!0,!0,!1),i},y.allBodies=function(i){if(i.cache&&i.cache.allBodies)return i.cache.allBodies;for(var e=[].concat(i.bodies),o=0;o<i.composites.length;o++)e=e.concat(y.allBodies(i.composites[o]));return i.cache&&(i.cache.allBodies=e),e},y.allConstraints=function(i){if(i.cache&&i.cache.allConstraints)return i.cache.allConstraints;for(var e=[].concat(i.constraints),o=0;o<i.composites.length;o++)e=e.concat(y.allConstraints(i.composites[o]));return i.cache&&(i.cache.allConstraints=e),e},y.allComposites=function(i){if(i.cache&&i.cache.allComposites)return i.cache.allComposites;for(var e=[].concat(i.composites),o=0;o<i.composites.length;o++)e=e.concat(y.allComposites(i.composites[o]));return i.cache&&(i.cache.allComposites=e),e},y.get=function(i,s,e){var t,n;return"body"===e?t=y.allBodies(i):"constraint"===e?t=y.allConstraints(i):"composite"===e?t=y.allComposites(i).concat(i):void 0,t?0===(n=t.filter(function(t){return t.id.toString()===s.toString()})).length?null:n[0]:null},y.move=function(i,e,t){return y.remove(i,e),y.add(t,e),i},y.rebase=function(i){for(var e=y.allBodies(i).concat(y.allConstraints(i)).concat(y.allComposites(i)),t=0;t<e.length;t++)e[t].id=d.nextId();return i},y.translate=function(i,e,t){for(var n=t?y.allBodies(i):i.bodies,o=0;o<n.length;o++)g.translate(n[o],e);return i},y.rotate=function(i,e,t,n){for(var o=te(e),s=ee(e),a=n?y.allBodies(i):i.bodies,r=0;r<a.length;r++){var l=a[r],m=l.position.x-t.x,d=l.position.y-t.y;g.setPosition(l,{x:t.x+(m*o-d*s),y:t.y+(m*s+d*o)}),g.rotate(l,e)}return i},y.scale=function(i,e,t,n,o){for(var s=o?y.allBodies(i):i.bodies,a=0;a<s.length;a++){var r=s[a],p=r.position.x-n.x,c=r.position.y-n.y;g.setPosition(r,{x:n.x+p*e,y:n.y+c*t}),g.scale(r,e,t)}return i},y.bounds=function(i){for(var e,s=y.allBodies(i),t=[],n=0;n<s.length;n+=1)e=s[n],t.push(e.bounds.min,e.bounds.max);return p.create(t)}},function(s,e,t){var y={};s.exports=y;var i=t(4),o=t(5),g=t(0);y._motionWakeThreshold=.18,y._motionSleepThreshold=.08,y._minBias=.9,y.update=function(o,e){for(var t=e/g._baseDelta,n=y._motionSleepThreshold,a=0;a<o.length;a++){var r=o[a],l=i.getSpeed(r),c=i.getAngularSpeed(r),m=l*l+c*c;if(0===r.force.x&&0===r.force.y){var d=K(r.motion,m),p=_(r.motion,m);r.motion=y._minBias*d+(1-y._minBias)*p,0<r.sleepThreshold&&r.motion<n?(r.sleepCounter+=1,r.sleepCounter>=r.sleepThreshold/t&&y.set(r,!0)):0<r.sleepCounter&&(r.sleepCounter-=1)}else y.set(r,!1)}},y.afterCollisions=function(i){for(var e,d=y._motionSleepThreshold,t=0;t<i.length;t++)if(e=i[t],e.isActive){var p=e.collision,r=p.bodyA.parent,a=p.bodyB.parent;if(!(r.isSleeping&&a.isSleeping||r.isStatic||a.isStatic)&&(r.isSleeping||a.isSleeping)){var s=r.isSleeping&&!r.isStatic?r:a,l=s===r?a:r;!s.isStatic&&l.motion>d&&y.set(s,!1)}}},y.set=function(i,e){var t=i.isSleeping;e?(i.isSleeping=!0,i.sleepCounter=i.sleepThreshold,i.positionImpulse.x=0,i.positionImpulse.y=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.speed=0,i.angularSpeed=0,i.motion=0,t||o.trigger(i,"sleepStart")):(i.isSleeping=!1,i.sleepCounter=0,t&&o.trigger(i,"sleepEnd"))}},function(d,e,t){var h={};d.exports=h;var g,i,b,S=t(3),s=t(9);g=[],i={overlap:0,axis:null},b={overlap:0,axis:null},h.create=function(i,e){return{pair:null,collided:!1,bodyA:i,bodyB:e,parentA:i.parent,parentB:e.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},h.collides=function(a,r,l){if(h._overlapAxes(i,a.vertices,r.vertices,a.axes),0>=i.overlap)return null;if(h._overlapAxes(b,r.vertices,a.vertices,r.axes),0>=b.overlap)return null;var n,P,A=l&&l.table[s.id(a,r)];A?n=A.collision:((n=h.create(a,r)).collided=!0,n.bodyA=a.id<r.id?a:r,n.bodyB=a.id<r.id?r:a,n.parentA=n.bodyA.parent,n.parentB=n.bodyB.parent),a=n.bodyA,r=n.bodyB,P=i.overlap<b.overlap?i:b;var u=n.normal,d=n.supports,p=P.axis,f=p.x,v=p.y;0>f*(r.position.x-a.position.x)+v*(r.position.y-a.position.y)?(u.x=f,u.y=v):(u.x=-f,u.y=-v),n.tangent.x=-u.y,n.tangent.y=u.x,n.depth=P.overlap,n.penetration.x=u.x*n.depth,n.penetration.y=u.y*n.depth;var y=h._findSupports(a,r,u,1),m=0;if(S.contains(a.vertices,y[0])&&(d[m++]=y[0]),S.contains(a.vertices,y[1])&&(d[m++]=y[1]),2>m){var w=h._findSupports(r,a,u,-1);S.contains(r.vertices,w[0])&&(d[m++]=w[0]),2>m&&S.contains(r.vertices,w[1])&&(d[m++]=w[1])}return 0==m&&(d[m++]=y[0]),d.length=m,n},h._overlapAxes=function(_,e,t,n){var i,I,T,k,M,R,V=e.length,u=t.length,d=e[0].x,p=e[0].y,f=t[0].x,v=t[0].y,y=n.length,m=B,E=0;for(M=0;M<y;M++){var D=n[M],h=D.x,b=D.y,S=d*h+p*b,L=f*h+v*b,F=S,H=L;for(R=1;R<V;R+=1)(k=e[R].x*h+e[R].y*b)>F?F=k:k<S&&(S=k);for(R=1;R<u;R+=1)(k=t[R].x*h+t[R].y*b)>H?H=k:k<L&&(L=k);if((i=(I=F-L)<(T=H-S)?I:T)<m&&(m=i,E=M,0>=i))break}_.axis=n[E],_.overlap=m},h._projectToAxis=function(s,e,t){for(var n,l=e[0].x*t.x+e[0].y*t.y,d=l,p=1;p<e.length;p+=1)n=e[p].x*t.x+e[p].y*t.y,n>d?d=n:n<l&&(l=n);s.min=l,s.max=d},h._findSupports=function(o,e,t,n){var i,x,h,b,S,P=e.vertices,u=P.length,d=o.position.x,p=o.position.y,f=t.x*n,v=t.y*n,y=B;for(S=0;S<u;S+=1)(b=f*(d-(x=P[S]).x)+v*(p-x.y))<y&&(y=b,i=x);return y=f*(d-(h=P[(u+i.index-1)%u]).x)+v*(p-h.y),f*(d-(x=P[(i.index+1)%u]).x)+v*(p-x.y)<y?(g[0]=i,g[1]=x,g):(g[0]=i,g[1]=h,g)}},function(s,e,t){var a={};s.exports=a;var n=t(16);a.create=function(i,e){var t=i.bodyA,n=i.bodyB,o={id:a.id(t,n),bodyA:t,bodyB:n,collision:i,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:t.isSensor||n.isSensor,timeCreated:e,timeUpdated:e,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return a.update(o,i,e),o},a.update=function(o,e,t){var y=o.contacts,i=e.supports,r=o.activeContacts,a=e.parentA,s=e.parentB,l=a.vertices.length;o.isActive=!0,o.timeUpdated=t,o.collision=e,o.separation=e.depth,o.inverseMass=a.inverseMass+s.inverseMass,o.friction=a.friction<s.friction?a.friction:s.friction,o.frictionStatic=a.frictionStatic>s.frictionStatic?a.frictionStatic:s.frictionStatic,o.restitution=a.restitution>s.restitution?a.restitution:s.restitution,o.slop=a.slop>s.slop?a.slop:s.slop,e.pair=o,r.length=0;for(var c=0;c<i.length;c++){var g=i[c],d=g.body===a?g.index:l+g.index,p=y[d];p?r.push(p):r.push(y[d]=n.create(g))}},a.setActive=function(i,e,t){e?(i.isActive=!0,i.timeUpdated=t):(i.isActive=!1,i.activeContacts.length=0)},a.id=function(i,e){return i.id<e.id?"A"+i.id+"B"+e.id:"A"+e.id+"B"+i.id}},function(d,e,t){var P={};d.exports=P;var i=t(3),C=t(2),o=t(7),a=t(1),s=t(11),l=t(0);P._warming=.4,P._torqueDampen=1,P._minLength=1e-6,P.create=function(s){var e=s;e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var t=e.bodyA?C.add(e.bodyA.position,e.pointA):e.pointA,n=e.bodyB?C.add(e.bodyB.position,e.pointB):e.pointB,i=C.magnitude(C.sub(t,n));e.length=void 0===e.length?i:e.length,e.id=e.id||l.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(0<e.length?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var o={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===e.length&&.1<e.stiffness?(o.type="pin",o.anchors=!1):.9>e.stiffness&&(o.type="spring"),e.render=l.extend(o,e.render),e},P.preSolveAll=function(o){for(var e=0;e<o.length;e+=1){var s=o[e],n=s.constraintImpulse;s.isStatic||0===n.x&&0===n.y&&0===n.angle||(s.position.x+=n.x,s.position.y+=n.y,s.angle+=n.angle)}},P.solveAll=function(i,e){for(var t=l.clamp(e/l._baseDelta,0,1),n=0;n<i.length;n+=1){var d=i[n],p=!d.bodyA||d.bodyA&&d.bodyA.isStatic,c=!d.bodyB||d.bodyB&&d.bodyB.isStatic;(p||c)&&P.solve(i[n],t)}for(n=0;n<i.length;n+=1)p=!(d=i[n]).bodyA||d.bodyA&&d.bodyA.isStatic,c=!d.bodyB||d.bodyB&&d.bodyB.isStatic,p||c||P.solve(i[n],t)},P.solve=function(i,e){var t=i.bodyA,n=i.bodyB,o=i.pointA,a=i.pointB;if(t||n){t&&!t.isStatic&&(C.rotate(o,t.angle-i.angleA,o),i.angleA=t.angle),n&&!n.isStatic&&(C.rotate(a,n.angle-i.angleB,a),i.angleB=n.angle);var s=o,r=a;if(t&&(s=C.add(t.position,o)),n&&(r=C.add(n.position,a)),s&&r){var B=C.sub(s,r),u=C.magnitude(B);u<P._minLength&&(u=P._minLength);var _,I,T,k,M,R=(u-i.length)/u,g=1<=i.stiffness||0===i.length?i.stiffness*e:i.stiffness*e*e,x=i.damping*e,h=C.mult(B,R*g),b=(t?t.inverseMass:0)+(n?n.inverseMass:0),S=b+((t?t.inverseInertia:0)+(n?n.inverseInertia:0));if(0<x){var w=C.create();T=C.div(B,u),M=C.sub(n&&C.sub(n.position,n.positionPrev)||w,t&&C.sub(t.position,t.positionPrev)||w),k=C.dot(T,M)}t&&!t.isStatic&&(I=t.inverseMass/b,t.constraintImpulse.x-=h.x*I,t.constraintImpulse.y-=h.y*I,t.position.x-=h.x*I,t.position.y-=h.y*I,0<x&&(t.positionPrev.x-=x*T.x*k*I,t.positionPrev.y-=x*T.y*k*I),_=C.cross(o,h)/S*P._torqueDampen*t.inverseInertia*(1-i.angularStiffness),t.constraintImpulse.angle-=_,t.angle-=_),n&&!n.isStatic&&(I=n.inverseMass/b,n.constraintImpulse.x+=h.x*I,n.constraintImpulse.y+=h.y*I,n.position.x+=h.x*I,n.position.y+=h.y*I,0<x&&(n.positionPrev.x+=x*T.x*k*I,n.positionPrev.y+=x*T.y*k*I),_=C.cross(a,h)/S*P._torqueDampen*n.inverseInertia*(1-i.angularStiffness),n.constraintImpulse.angle+=_,n.angle+=_)}}},P.postSolveAll=function(r){for(var e=0;e<r.length;e++){var l=r[e],n=l.constraintImpulse;if(!(l.isStatic||0===n.x&&0===n.y&&0===n.angle)){o.set(l,!1);for(var p,c=0;c<l.parts.length;c++)p=l.parts[c],i.translate(p.vertices,n),0<c&&(p.position.x+=n.x,p.position.y+=n.y),0!==n.angle&&(i.rotate(p.vertices,n.angle,l.position),s.rotate(p.axes,n.angle),0<c&&C.rotateAbout(p.position,n.angle,l.position,p.position)),a.update(p.bounds,p.vertices,l.velocity);n.angle*=P._warming,n.x*=P._warming,n.y*=P._warming}}},P.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+(t.pointA?t.pointA.x:0),y:(t.bodyA?t.bodyA.position.y:0)+(t.pointA?t.pointA.y:0)}},P.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+(t.pointB?t.pointB.x:0),y:(t.bodyB?t.bodyB.position.y:0)+(t.pointB?t.pointB.y:0)}}},function(s,e,t){var n={};s.exports=n;var l=t(2),o=t(0);n.fromVertices=function(r){for(var e={},t=0;t<r.length;t++){var d=(t+1)%r.length,i=l.normalise({x:r[d].y-r[t].y,y:r[t].x-r[d].x}),a=0===i.y?1/0:i.x/i.y;e[a=a.toFixed(3).toString()]=i}return o.values(e)},n.rotate=function(s,e){if(0!==e)for(var t=te(e),n=ee(e),i=0;i<s.length;i++){var l,d=s[i];l=d.x*t-d.y*n,d.y=d.x*n+d.y*t,d.x=l}}},function(d,p,t){var x={};d.exports=x;var h=t(3),V=t(0),o=t(4),i=t(1),n=t(2);x.rectangle=function(a,e,t,n,i){i=i||{};var r={label:"Rectangle Body",position:{x:a,y:e},vertices:h.fromPath("L 0 0 L "+t+" 0 L "+t+" "+n+" L 0 "+n)};if(i.chamfer){var l=i.chamfer;r.vertices=h.chamfer(r.vertices,l.radius,l.quality,l.qualityMin,l.qualityMax),delete i.chamfer}return o.create(V.extend({},r,i))},x.trapezoid=function(a,e,t,n,i,r){r=r||{};var y,g=t*(i*=.5),m=g+(1-2*i)*t,d=m+g;y=.5>i?"L 0 0 L "+g+" "+-n+" L "+m+" "+-n+" L "+d+" 0":"L 0 0 L "+m+" "+-n+" L "+d+" 0";var p={label:"Trapezoid Body",position:{x:a,y:e},vertices:h.fromPath(y)};if(r.chamfer){var u=r.chamfer;p.vertices=h.chamfer(p.vertices,u.radius,u.quality,u.qualityMin,u.qualityMax),delete r.chamfer}return o.create(V.extend({},p,r))},x.circle=function(i,e,t,n,s){n=n||{};s=s||25;var r=g(_(10,K(s,t)));return 1==r%2&&(r+=1),x.polygon(i,e,r,t,V.extend({},{label:"Circle Body",circleRadius:t},n))},x.polygon=function(i,a,t,n,s){if(s=s||{},3>t)return x.circle(i,a,n,s);for(var r=2*e/t,d="",c=0;c<t;c+=1){var b=.5*r+c*r,f=te(b)*n,v=ee(b)*n;d+="L "+f.toFixed(3)+" "+v.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:i,y:a},vertices:h.fromPath(d)};if(s.chamfer){var m=s.chamfer;y.vertices=h.chamfer(y.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete s.chamfer}return o.create(V.extend({},y,s))},x.fromVertices=function(s,e,t,a,r,l,E,D){var L,F,H,q,O,W,j,G,U,z,N=V.getDecomp();for(L=!!(N&&N.quickDecomp),a=a||{},H=[],r=void 0!==r&&r,l=void 0===l?.01:l,E=void 0===E?10:E,D=void 0===D?.01:D,V.isArray(t[0])||(t=[t]),U=0;U<t.length;U+=1)if(O=t[U],!(q=h.isConvex(O))&&!L&&V.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),q||!L)O=q?h.clockwiseSort(O):h.hull(O),H.push({position:{x:s,y:e},vertices:O});else{var A=O.map(function(t){return[t.x,t.y]});N.makeCCW(A),!1!==l&&N.removeCollinearPoints(A,l),!1!==D&&N.removeDuplicatePoints&&N.removeDuplicatePoints(A,D);var P=N.quickDecomp(A);for(W=0;W<P.length;W++){var C=P[W].map(function(t){return{x:t[0],y:t[1]}});0<E&&h.area(C)<E||H.push({position:h.centre(C),vertices:C})}}for(W=0;W<H.length;W++)H[W]=o.create(V.extend(H[W],a));if(r)for(W=0;W<H.length;W++){var M=H[W];for(j=W+1;j<H.length;j++){var B=H[j];if(i.overlaps(M.bounds,B.bounds)){var _=M.vertices,k=B.vertices;for(G=0;G<M.vertices.length;G++)for(z=0;z<B.vertices.length;z++){var I=n.magnitudeSquared(n.sub(_[(G+1)%_.length],k[z])),T=n.magnitudeSquared(n.sub(_[G],k[(z+1)%k.length]));5>I&&5>T&&(_[G].isInternal=!0,k[z].isInternal=!0)}}}}return 1<H.length?(F=o.create(V.extend({parts:H.slice(0)},a)),o.setPosition(F,{x:s,y:e}),F):H[0]}},function(s,e,t){var x={};s.exports=x;var i=t(0),_=t(8);x.create=function(t){return i.extend({bodies:[],pairs:null},t)},x.setBodies=function(i,e){i.bodies=e.slice(0)},x.clear=function(t){t.bodies=[]},x.collisions=function(i){var e,r,I=[],o=i.pairs,a=i.bodies,s=a.length,l=x.canCollide,c=_.collides;for(a.sort(x._compareBoundsX),e=0;e<s;e++){var u=a[e],d=u.bounds,T=u.bounds.max.x,f=u.bounds.max.y,v=u.bounds.min.y,y=u.isStatic||u.isSleeping,m=u.parts.length;for(r=e+1;r<s;r++){var g=a[r];if((M=g.bounds).min.x>T)break;if(!(f<M.min.y||v>M.max.y)&&(!y||!g.isStatic&&!g.isSleeping)&&l(u.collisionFilter,g.collisionFilter)){var h=g.parts.length;if(1===m&&1===h)(R=c(u,g,o))&&I.push(R);else for(var b=1<h?1:0,S=1<m?1:0;S<m;S++)for(var k=u.parts[S],A=(d=k.bounds,b);A<h;A++){var R,V=g.parts[A],M=V.bounds;d.min.x>M.max.x||d.max.x<M.min.x||d.max.y<M.min.y||d.min.y>M.max.y||(R=c(k,V,o))&&I.push(R)}}}}return I},x.canCollide=function(i,e){return i.group===e.group&&0!==i.group?0<i.group:0!=(i.mask&e.category)&&0!=(e.mask&i.category)},x._compareBoundsX=function(i,e){return i.bounds.min.x-e.bounds.min.x}},function(s,e,t){var a={};s.exports=a;var i=t(0);a.create=function(o){var s={};return o||i.log("Mouse.create: element was undefined, defaulting to document.body","warn"),s.element=o||document.body,s.absolute={x:0,y:0},s.position={x:0,y:0},s.mousedownPosition={x:0,y:0},s.mouseupPosition={x:0,y:0},s.offset={x:0,y:0},s.scale={x:1,y:1},s.wheelDelta=0,s.button=-1,s.pixelRatio=parseInt(s.element.getAttribute("data-pixel-ratio"),10)||1,s.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},s.mousemove=function(t){var e=a._getRelativeMousePosition(t,s.element,s.pixelRatio);t.changedTouches&&(s.button=0,t.preventDefault()),s.absolute.x=e.x,s.absolute.y=e.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.sourceEvents.mousemove=t},s.mousedown=function(t){var e=a._getRelativeMousePosition(t,s.element,s.pixelRatio);t.changedTouches?(s.button=0,t.preventDefault()):s.button=t.button,s.absolute.x=e.x,s.absolute.y=e.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mousedownPosition.x=s.position.x,s.mousedownPosition.y=s.position.y,s.sourceEvents.mousedown=t},s.mouseup=function(t){var e=a._getRelativeMousePosition(t,s.element,s.pixelRatio);t.changedTouches&&t.preventDefault(),s.button=-1,s.absolute.x=e.x,s.absolute.y=e.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mouseupPosition.x=s.position.x,s.mouseupPosition.y=s.position.y,s.sourceEvents.mouseup=t},s.mousewheel=function(t){s.wheelDelta=_(-1,K(1,t.wheelDelta||-t.detail)),t.preventDefault()},a.setElement(s,s.element),s},a.setElement=function(i,e){i.element=e,e.addEventListener("mousemove",i.mousemove),e.addEventListener("mousedown",i.mousedown),e.addEventListener("mouseup",i.mouseup),e.addEventListener("mousewheel",i.mousewheel),e.addEventListener("DOMMouseScroll",i.mousewheel),e.addEventListener("touchmove",i.mousemove),e.addEventListener("touchstart",i.mousedown),e.addEventListener("touchend",i.mouseup)},a.clearSourceEvents=function(t){t.sourceEvents.mousemove=null,t.sourceEvents.mousedown=null,t.sourceEvents.mouseup=null,t.sourceEvents.mousewheel=null,t.wheelDelta=0},a.setOffset=function(i,e){i.offset.x=e.x,i.offset.y=e.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},a.setScale=function(i,e){i.scale.x=e.x,i.scale.y=e.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},a._getRelativeMousePosition=function(d,e,t){var n,p,y=e.getBoundingClientRect(),r=document.documentElement||document.body.parentNode||document.body,a=void 0===window.pageXOffset?r.scrollLeft:window.pageXOffset,s=void 0===window.pageYOffset?r.scrollTop:window.pageYOffset,l=d.changedTouches;return l?(n=l[0].pageX-y.left-a,p=l[0].pageY-y.top-s):(n=d.pageX-y.left-a,p=d.pageY-y.top-s),{x:n/(e.clientWidth/(e.width||e.clientWidth)*t),y:p/(e.clientHeight/(e.height||e.clientHeight)*t)}}},function(s,e,t){var d={};s.exports=d;var p=t(0);d._registry={},d.register=function(i){if(d.isPlugin(i)||p.warn("Plugin.register:",d.toString(i),"does not implement all required fields."),i.name in d._registry){var e=d._registry[i.name],t=d.versionParse(i.version).number,o=d.versionParse(e.version).number;t>o?(p.warn("Plugin.register:",d.toString(e),"was upgraded to",d.toString(i)),d._registry[i.name]=i):t<o?p.warn("Plugin.register:",d.toString(e),"can not be downgraded to",d.toString(i)):i!==e&&p.warn("Plugin.register:",d.toString(i),"is already registered to different plugin object")}else d._registry[i.name]=i;return i},d.resolve=function(t){return d._registry[d.dependencyParse(t).name]},d.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},d.isPlugin=function(t){return t&&t.name&&t.version&&t.install},d.isUsed=function(i,e){return-1<i.used.indexOf(e)},d.isFor=function(i,e){var t=i.for&&d.dependencyParse(i.for);return!i.for||e.name===t.name&&d.versionSatisfies(e.version,t.range)},d.use=function(i,e){if(i.uses=(i.uses||[]).concat(e||[]),0!==i.uses.length){for(var t=d.dependencies(i),o=p.topologicalSort(t),n=[],a=0;a<o.length;a+=1)if(o[a]!==i.name){var r=d.resolve(o[a]);r?d.isUsed(i,r.name)||(d.isFor(r,i)||(p.warn("Plugin.use:",d.toString(r),"is for",r.for,"but installed on",d.toString(i)+"."),r._warned=!0),r.install?r.install(i):(p.warn("Plugin.use:",d.toString(r),"does not specify an install function."),r._warned=!0),r._warned?(n.push("\uD83D\uDD36 "+d.toString(r)),delete r._warned):n.push("\u2705 "+d.toString(r)),i.used.push(r.name)):n.push("\u274C "+o[a])}0<n.length&&p.info(n.join("  "))}else p.warn("Plugin.use:",d.toString(i),"does not specify any dependencies to install.")},d.dependencies=function(i,o){var s=d.dependencyParse(i),n=s.name;if(!(n in(o=o||{}))){i=d.resolve(i)||i,o[n]=p.map(i.uses||[],function(e){d.isPlugin(e)&&d.register(e);var t=d.dependencyParse(e),o=d.resolve(e);return o&&!d.versionSatisfies(o.version,t.range)?(p.warn("Plugin.dependencies:",d.toString(o),"does not satisfy",d.toString(t),"used by",d.toString(s)+"."),o._warned=!0,i._warned=!0):o||(p.warn("Plugin.dependencies:",d.toString(e),"used by",d.toString(s),"could not be resolved."),i._warned=!0),t.name});for(var r=0;r<o[n].length;r+=1)d.dependencies(o[n][r],o);return o}},d.dependencyParse=function(t){return p.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(t)||p.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},d.versionParse=function(o){var e=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;e.test(o)||p.warn("Plugin.versionParse:",o,"is not a valid version or range.");var t=e.exec(o),n=+t[4],i=+t[5],s=+t[6];return{isRange:!!(t[1]||t[2]),version:t[3],range:o,operator:t[1]||t[2]||"",major:n,minor:i,patch:s,parts:[n,i,s],prerelease:t[7],number:1e8*n+1e4*i+s}},d.versionSatisfies=function(i,e){e=e||"*";var s=d.versionParse(e),n=d.versionParse(i);if(s.isRange){if("*"===s.operator||"*"===i)return!0;if(">"===s.operator)return n.number>s.number;if(">="===s.operator)return n.number>=s.number;if("~"===s.operator)return n.major===s.major&&n.minor===s.minor&&n.patch>=s.patch;if("^"===s.operator)return 0<s.major?n.major===s.major&&n.number>=s.number:0<s.minor?n.minor===s.minor&&n.patch>=s.patch:n.patch===s.patch}return i===e||"*"===i}},function(t){var e={};t.exports=e,e.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}},function(y,e,t){var P={};y.exports=P;var i=t(7),o=t(18),r=t(13),a=t(19),s=t(5),l=t(6),c=t(10),u=t(0),d=t(4);P.create=function(i){i=i||{};var o=u.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},i);return o.world=i.world||l.create({label:"World"}),o.pairs=i.pairs||a.create(),o.detector=i.detector||r.create(),o.grid={buckets:[]},o.world.gravity=o.gravity,o.broadphase=o.grid,o.metrics={},o},P.update=function(d,e){var A,C=u.now(),p=d.world,f=d.detector,v=d.pairs,y=d.timing,m=y.timestamp;e=void 0===e?u._baseDelta:e,e*=y.timeScale,y.timestamp+=e,y.lastDelta=e;var g={timestamp:y.timestamp,delta:e};s.trigger(d,"beforeUpdate",g);var x=l.allBodies(p),h=l.allConstraints(p);for(p.isModified&&(r.setBodies(f,x),l.setModified(p,!1,!1,!0)),d.enableSleeping&&i.update(x,e),P._bodiesApplyGravity(x,d.gravity),0<e&&P._bodiesUpdate(x,e),c.preSolveAll(x),A=0;A<d.constraintIterations;A++)c.solveAll(h,e);c.postSolveAll(x),f.pairs=d.pairs;var b=r.collisions(f);a.update(v,b,m),d.enableSleeping&&i.afterCollisions(v.list),0<v.collisionStart.length&&s.trigger(d,"collisionStart",{pairs:v.collisionStart});var S=u.clamp(20/d.positionIterations,0,1);for(o.preSolvePosition(v.list),A=0;A<d.positionIterations;A++)o.solvePosition(v.list,e,S);for(o.postSolvePosition(x),c.preSolveAll(x),A=0;A<d.constraintIterations;A++)c.solveAll(h,e);for(c.postSolveAll(x),o.preSolveVelocity(v.list),A=0;A<d.velocityIterations;A++)o.solveVelocity(v.list,e);return P._bodiesUpdateVelocities(x),0<v.collisionActive.length&&s.trigger(d,"collisionActive",{pairs:v.collisionActive}),0<v.collisionEnd.length&&s.trigger(d,"collisionEnd",{pairs:v.collisionEnd}),P._bodiesClearForces(x),s.trigger(d,"afterUpdate",g),d.timing.lastElapsed=u.now()-C,d},P.merge=function(o,e){if(u.extend(o,e),e.world){o.world=e.world,P.clear(o);for(var t,s=l.allBodies(o.world),n=0;n<s.length;n++)t=s[n],i.set(t,!1),t.id=u.nextId()}},P.clear=function(t){a.clear(t.pairs),r.clear(t.detector)},P._bodiesClearForces=function(o){for(var e,s=o.length,t=0;t<s;t++)e=o[t],e.force.x=0,e.force.y=0,e.torque=0},P._bodiesApplyGravity=function(s,e){var t=void 0===e.scale?.001:e.scale,n=s.length;if((0!==e.x||0!==e.y)&&0!==t)for(var i,a=0;a<n;a++)i=s[a],i.isStatic||i.isSleeping||(i.force.y+=i.mass*e.y*t,i.force.x+=i.mass*e.x*t)},P._bodiesUpdate=function(s,e){for(var t,a=s.length,n=0;n<a;n++)t=s[n],t.isStatic||t.isSleeping||d.update(t,e)},P._bodiesUpdateVelocities=function(i){for(var e=i.length,t=0;t<e;t++)d.updateVelocities(i[t])}},function(s,e,t){var ee={};s.exports=ee;var i=t(3),te=t(0),o=t(1);ee._restingThresh=2,ee._restingThreshTangent=ie(6),ee._positionDampen=.9,ee._positionWarming=.8,ee._frictionNormalMultiplier=5,ee._frictionMaxStatic=B,ee.preSolvePosition=function(s){var e,a,r,l=s.length;for(e=0;e<l;e++)(a=s[e]).isActive&&(r=a.activeContacts.length,a.collision.parentA.totalContacts+=r,a.collision.parentB.totalContacts+=r)},ee.solvePosition=function(i,e,t){var n,r,g,m,x,h,b,S,P=ee._positionDampen*(t||1),f=te.clamp(e/te._baseDelta,0,1),v=i.length;for(n=0;n<v;n++)(r=i[n]).isActive&&!r.isSensor&&(m=(g=r.collision).parentA,x=g.parentB,h=g.normal,r.separation=h.x*(x.positionImpulse.x+g.penetration.x-m.positionImpulse.x)+h.y*(x.positionImpulse.y+g.penetration.y-m.positionImpulse.y));for(n=0;n<v;n++)(r=i[n]).isActive&&!r.isSensor&&(m=(g=r.collision).parentA,x=g.parentB,h=g.normal,S=r.separation-r.slop*f,(m.isStatic||x.isStatic)&&(S*=2),m.isStatic||m.isSleeping||(b=P/m.totalContacts,m.positionImpulse.x+=h.x*S*b,m.positionImpulse.y+=h.y*S*b),x.isStatic||x.isSleeping||(b=P/x.totalContacts,x.positionImpulse.x-=h.x*S*b,x.positionImpulse.y-=h.y*S*b))},ee.postSolvePosition=function(a){for(var e=ee._positionWarming,t=a.length,n=i.translate,r=o.update,s=0;s<t;s++){var g=a[s],c=g.positionImpulse,m=c.x,d=c.y,p=g.velocity;if(g.totalContacts=0,0!==m||0!==d){for(var u,x=0;x<g.parts.length;x++)u=g.parts[x],n(u.vertices,c),r(u.bounds,u.vertices,p),u.position.x+=m,u.position.y+=d;g.positionPrev.x+=m,g.positionPrev.y+=d,0>m*p.x+d*p.y?(c.x=0,c.y=0):(c.x*=e,c.y*=e)}}},ee.preSolveVelocity=function(x){var e,h,b=x.length;for(e=0;e<b;e++){var i=x[e];if(i.isActive&&!i.isSensor){var o=i.activeContacts,r=o.length,a=i.collision,s=a.parentA,l=a.parentB,c=a.normal,u=a.tangent;for(h=0;h<r;h++){var d=o[h],p=d.vertex,f=d.normalImpulse,v=d.tangentImpulse;if(0!==f||0!==v){var y=c.x*f+u.x*v,m=c.y*f+u.y*v;s.isStatic||s.isSleeping||(s.positionPrev.x+=y*s.inverseMass,s.positionPrev.y+=m*s.inverseMass,s.anglePrev+=s.inverseInertia*((p.x-s.position.x)*m-(p.y-s.position.y)*y)),l.isStatic||l.isSleeping||(l.positionPrev.x-=y*l.inverseMass,l.positionPrev.y-=m*l.inverseMass,l.anglePrev-=l.inverseInertia*((p.x-l.position.x)*m-(p.y-l.position.y)*y))}}}}},ee.solveVelocity=function(i,e){var t,r,c,B,ie=e/te._baseDelta,l=-ee._restingThresh*ie,u=ee._restingThreshTangent,d=ee._frictionNormalMultiplier*ie,p=ee._frictionMaxStatic,f=i.length;for(c=0;c<f;c++){var v=i[c];if(v.isActive&&!v.isSensor){var y=v.collision,m=y.parentA,g=y.parentB,x=m.velocity,h=g.velocity,b=y.normal.x,S=y.normal.y,w=y.tangent.x,A=y.tangent.y,P=v.activeContacts,C=P.length,M=m.inverseMass+g.inverseMass,_=v.friction*v.frictionStatic*d;for(x.x=m.position.x-m.positionPrev.x,x.y=m.position.y-m.positionPrev.y,h.x=g.position.x-g.positionPrev.x,h.y=g.position.y-g.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,g.angularVelocity=g.angle-g.anglePrev,B=0;B<C;B++){var k=P[B],I=k.vertex,T=I.x-m.position.x,R=I.y-m.position.y,V=I.x-g.position.x,E=I.y-g.position.y,L=x.x-R*m.angularVelocity,D=x.y+T*m.angularVelocity,O=L-(h.x-E*g.angularVelocity),F=D-(h.y+V*g.angularVelocity),H=b*O+S*F,j=w*O+A*F,q=v.separation+H,W=K(q,1),oe=(W=0>q?0:W)*_;j<-oe||j>oe?(r=0<j?j:-j,(t=v.friction*(0<j?1:-1)*(ie*ie*ie))<-r?t=-r:t>r&&(t=r)):(t=j,r=p);var U=T*S-R*b,N=V*S-E*b,z=1/C/(M+m.inverseInertia*U*U+g.inverseInertia*N*N),X=(1+v.restitution)*H*z;if(t*=z,H<l)k.normalImpulse=0;else{var ne=k.normalImpulse;k.normalImpulse+=X,0<k.normalImpulse&&(k.normalImpulse=0),X=k.normalImpulse-ne}if(j<-u||j>u)k.tangentImpulse=0;else{var Y=k.tangentImpulse;k.tangentImpulse+=t,k.tangentImpulse<-r&&(k.tangentImpulse=-r),k.tangentImpulse>r&&(k.tangentImpulse=r),t=k.tangentImpulse-Y}var Z=b*X+w*t,$=S*X+A*t;m.isStatic||m.isSleeping||(m.positionPrev.x+=Z*m.inverseMass,m.positionPrev.y+=$*m.inverseMass,m.anglePrev+=(T*$-R*Z)*m.inverseInertia),g.isStatic||g.isSleeping||(g.positionPrev.x-=Z*g.inverseMass,g.positionPrev.y-=$*g.inverseMass,g.anglePrev-=(V*$-E*Z)*g.inverseInertia)}}}}},function(s,e,t){var n={};s.exports=n;var g=t(9),i=t(0);n.create=function(t){return i.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},n.update=function(o,e,t){var n,m,x,h,b=o.list,l=b.length,S=o.table,u=e.length,d=o.collisionStart,p=o.collisionEnd,f=o.collisionActive;for(d.length=0,p.length=0,f.length=0,h=0;h<l;h++)b[h].confirmedActive=!1;for(h=0;h<u;h++)(x=(n=e[h]).pair)?(x.isActive?f.push(x):d.push(x),g.update(x,n,t),x.confirmedActive=!0):(S[(x=g.create(n,t)).id]=x,d.push(x),b.push(x));var v=[];for(l=b.length,h=0;h<l;h++)(x=b[h]).confirmedActive||(g.setActive(x,!1,t),p.push(x),x.collision.bodyA.isSleeping||x.collision.bodyB.isSleeping||v.push(h));for(h=0;h<v.length;h++)x=b[m=v[h]-h],b.splice(m,1),delete S[x.id]},n.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},function(o,e,t){var n=o.exports=t(21);n.Axes=t(11),n.Bodies=t(12),n.Body=t(4),n.Bounds=t(1),n.Collision=t(8),n.Common=t(0),n.Composite=t(6),n.Composites=t(22),n.Constraint=t(10),n.Contact=t(16),n.Detector=t(13),n.Engine=t(17),n.Events=t(5),n.Grid=t(23),n.Mouse=t(14),n.MouseConstraint=t(24),n.Pair=t(9),n.Pairs=t(19),n.Plugin=t(15),n.Query=t(25),n.Render=t(26),n.Resolver=t(18),n.Runner=t(27),n.SAT=t(28),n.Sleeping=t(7),n.Svg=t(29),n.Vector=t(2),n.Vertices=t(3),n.World=t(30),n.Engine.run=n.Runner.run,n.Common.deprecated(n.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(s,e,t){var n={};s.exports=n;var i=t(15),o=t(0);n.name="matter-js",n.version="0.19.0",n.uses=[],n.used=[],n.use=function(){i.use(n,Array.prototype.slice.call(arguments))},n.before=function(i,s){return i=i.replace(/^Matter./,""),o.chainPathBefore(n,i,s)},n.after=function(i,s){return i=i.replace(/^Matter./,""),o.chainPathAfter(n,i,s)}},function(d,e,t){var y={};d.exports=y;var b=t(6),o=t(10),x=t(0),S=t(4),r=t(12),i=x.deprecated;y.stack=function(o,e,t,n,i,s,a){for(var r,l=b.create({label:"Stack"}),u=o,P=e,A=0,w=0;w<n;w++){for(var C,B=0,_=0;_<t;_++)if(C=a(u,P,_,w,r,A),C){var I=C.bounds.max.y-C.bounds.min.y,x=C.bounds.max.x-C.bounds.min.x;I>B&&(B=I),S.translate(C,{x:.5*x,y:.5*I}),u=C.bounds.max.x+i,b.addBody(l,C),r=C,A+=1}else u+=i;P+=B+s,u=o}return l},y.chain=function(a,e,t,n,i,s){for(var r=a.bodies,l=1;l<r.length;l++){var c=r[l-1],d=r[l],p=c.bounds.max.y-c.bounds.min.y,h=c.bounds.max.x-c.bounds.min.x,v=d.bounds.max.y-d.bounds.min.y,y={bodyA:c,pointA:{x:h*e,y:p*t},bodyB:d,pointB:{x:(d.bounds.max.x-d.bounds.min.x)*n,y:v*i}},m=x.extend(y,s);b.addConstraint(a,o.create(m))}return a.label+=" Chain",a},y.mesh=function(a,e,t,n,i){var s,r,y,g,m,h=a.bodies;for(s=0;s<t;s++){for(r=1;r<e;r++)y=h[r-1+s*e],g=h[r+s*e],b.addConstraint(a,o.create(x.extend({bodyA:y,bodyB:g},i)));if(0<s)for(r=0;r<e;r++)y=h[r+(s-1)*e],g=h[r+s*e],b.addConstraint(a,o.create(x.extend({bodyA:y,bodyB:g},i))),n&&0<r&&(m=h[r-1+(s-1)*e],b.addConstraint(a,o.create(x.extend({bodyA:m,bodyB:g},i)))),n&&r<e-1&&(m=h[r+1+(s-1)*e],b.addConstraint(a,o.create(x.extend({bodyA:m,bodyB:g},i))))}return a.label+=" Mesh",a},y.pyramid=function(s,e,m,n,o,t,r){return y.stack(s,e,m,n,o,t,function(e,t,i,a,l,y){var d=K(n,g(m/2)),p=l?l.bounds.max.x-l.bounds.min.x:0;if(!(a>d||i<(a=d-a)||i>m-1-a))return 1===y&&S.translate(l,{x:(i+(1==m%2?1:-1))*p,y:0}),r(s+(l?i*p:0)+i*o,t,i,a,l,y)})},y.newtonsCradle=function(l,e,t,n,i){for(var a=b.create({label:"Newtons Cradle"}),s=0;s<t;s++){var p=r.circle(l+s*(1.9*n),e+i,n,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),y=o.create({pointA:{x:l+s*(1.9*n),y:e},bodyB:p});b.addBody(a,p),b.addConstraint(a,y)}return a},i(y,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),y.car=function(s,e,t,n,i){var a=S.nextGroup(!0),l=.5*-t+20,c=.5*t-20,d=b.create({label:"Car"}),p=r.rectangle(s,e,t,n,{collisionFilter:{group:a},chamfer:{radius:.5*n},density:2e-4}),u=r.circle(s+l,e+0,i,{collisionFilter:{group:a},friction:.8}),x=r.circle(s+c,e+0,i,{collisionFilter:{group:a},friction:.8}),y=o.create({bodyB:p,pointB:{x:l,y:0},bodyA:u,stiffness:1,length:0}),m=o.create({bodyB:p,pointB:{x:c,y:0},bodyA:x,stiffness:1,length:0});return b.addBody(d,p),b.addBody(d,u),b.addBody(d,x),b.addConstraint(d,y),b.addConstraint(d,m),d},i(y,"car","Composites.car \u27A4 moved to car example"),y.softBody=function(i,e,t,n,o,a,s,l,c,g){c=x.extend({inertia:1/0},c),g=x.extend({stiffness:.2,render:{type:"line",anchors:!1}},g);var m=y.stack(i,e,t,n,o,a,function(i,e){return r.circle(i,e,l,c)});return y.mesh(m,t,n,s,g),m.label="Soft Body",m},i(y,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")},function(s,e,t){var x={};s.exports=x;var d=t(9),p=t(0),i=p.deprecated;x.create=function(t){return p.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},t)},x.update=function(i,e,t,n){var o,h,b,S,P,A=t.world,u=i.buckets,d=!1;for(o=0;o<e.length;o++){var w=e[o];if((!w.isSleeping||n)&&(!A.bounds||!(w.bounds.max.x<A.bounds.min.x||w.bounds.min.x>A.bounds.max.x||w.bounds.max.y<A.bounds.min.y||w.bounds.min.y>A.bounds.max.y))){var f=x._getRegion(i,w);if(!w.region||f.id!==w.region.id||n){w.region&&!n||(w.region=f);var v=x._regionUnion(f,w.region);for(h=v.startCol;h<=v.endCol;h++)for(b=v.startRow;b<=v.endRow;b++){S=u[P=x._getBucketId(h,b)];var y=h>=f.startCol&&h<=f.endCol&&b>=f.startRow&&b<=f.endRow,m=h>=w.region.startCol&&h<=w.region.endCol&&b>=w.region.startRow&&b<=w.region.endRow;!y&&m&&m&&S&&x._bucketRemoveBody(i,S,w),(w.region===f||y&&!m||n)&&(S||(S=x._createBucket(u,P)),x._bucketAddBody(i,S,w))}w.region=f,d=!0}}}d&&(i.pairsList=x._createActivePairsList(i))},i(x,"update","Grid.update \u27A4 replaced by Matter.Detector"),x.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},i(x,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),x._regionUnion=function(i,e){var t=K(i.startCol,e.startCol),n=_(i.endCol,e.endCol),o=K(i.startRow,e.startRow),s=_(i.endRow,e.endRow);return x._createRegion(t,n,o,s)},x._getRegion=function(i,e){var t=e.bounds,n=oe(t.min.x/i.bucketWidth),o=oe(t.max.x/i.bucketWidth),r=oe(t.min.y/i.bucketHeight),a=oe(t.max.y/i.bucketHeight);return x._createRegion(n,o,r,a)},x._createRegion=function(o,e,t,n){return{id:o+","+e+","+t+","+n,startCol:o,endCol:e,startRow:t,endRow:n}},x._getBucketId=function(i,e){return"C"+i+"R"+e},x._createBucket=function(i,e){return i[e]=[]},x._bucketAddBody=function(o,e,t){var n,p=o.pairs,r=d.id,a=e.length;for(n=0;n<a;n++){var s=e[n];if(!(t.id===s.id||t.isStatic&&s.isStatic)){var l=r(t,s),c=p[l];c?c[2]+=1:p[l]=[t,s,1]}}e.push(t)},x._bucketRemoveBody=function(o,e,t){var n,r=o.pairs,a=d.id;e.splice(p.indexOf(e,t),1);var s=e.length;for(n=0;n<s;n++){var l=r[a(t,e[n])];l&&(l[2]-=1)}},x._createActivePairsList=function(r){var e,l,d=r.pairs,i=p.keys(d),o=i.length,a=[];for(l=0;l<o;l++)0<(e=d[i[l]])[2]?a.push(e):delete d[i[l]];return a}},function(y,e,t){var n={};y.exports=n;var g=t(3),o=t(7),i=t(14),m=t(5),s=t(13),a=t(10),l=t(6),c=t(0),r=t(1);n.create=function(s,e){var t=(s?s.mouse:null)||(e?e.mouse:null);t||(s&&s.render&&s.render.canvas?t=i.create(s.render.canvas):e&&e.element?t=i.create(e.element):(t=i.create(),c.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var d={type:"mouseConstraint",mouse:t,element:null,body:null,constraint:a.create({label:"Mouse Constraint",pointA:t.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},o=c.extend(d,e);return m.on(s,"beforeUpdate",function(){var e=l.allBodies(s.world);n.update(o,e),n._triggerEvents(o)}),o},n.update=function(l,e){var t=l.mouse,n=l.constraint,i=l.body;if(!(0===t.button))n.bodyB=l.body=null,n.pointB=null,i&&m.trigger(l,"enddrag",{mouse:t,body:i});else if(n.bodyB)o.set(n.bodyB,!1),n.pointA=t.position;else for(var p=0;p<e.length;p++)if(i=e[p],r.contains(i.bounds,t.position)&&s.canCollide(i.collisionFilter,l.collisionFilter))for(var y,x=1<i.parts.length?1:0;x<i.parts.length;x++)if(y=i.parts[x],g.contains(y.vertices,t.position)){n.pointA=t.position,n.bodyB=l.body=i,n.pointB={x:t.position.x-i.position.x,y:t.position.y-i.position.y},n.angleB=i.angle,o.set(i,!1),m.trigger(l,"startdrag",{mouse:t,body:i});break}},n._triggerEvents=function(o){var e=o.mouse,t=e.sourceEvents;t.mousemove&&m.trigger(o,"mousemove",{mouse:e}),t.mousedown&&m.trigger(o,"mousedown",{mouse:e}),t.mouseup&&m.trigger(o,"mouseup",{mouse:e}),i.clearSourceEvents(e)}},function(d,e,t){var y={};d.exports=y;var i=t(2),g=t(8),m=t(1),o=t(12),a=t(3);y.collides=function(a,e){for(var t=[],n=e.length,i=a.bounds,o=g.collides,s=m.overlaps,r=0;r<n;r++){var l=e[r],u=l.parts.length,d=1===u?0:1;if(s(l.bounds,i))for(var p,x=d;x<u;x++)if(p=l.parts[x],s(p.bounds,i)){var h=o(p,a);if(h){t.push(h);break}}}return t},y.ray=function(s,e,t,n){n=n||1e-100;for(var g,m=i.angle(e,t),a=i.magnitude(i.sub(e,t)),l=.5*(t.x+e.x),c=.5*(t.y+e.y),u=o.rectangle(l,c,a,n,{angle:m}),d=y.collides(u,s),p=0;p<d.length;p+=1)g=d[p],g.body=g.bodyB=g.bodyA;return d},y.region=function(a,e,t){for(var n=[],i=0;i<a.length;i++){var l=a[i],r=m.overlaps(l.bounds,e);(r&&!t||!r&&t)&&n.push(l)}return n},y.point=function(l,e){for(var t,d=[],n=0;n<l.length;n++)if(t=l[n],m.contains(t.bounds,e))for(var p,c=1===t.parts.length?0:1;c<t.parts.length;c++)if(p=t.parts[c],m.contains(p.bounds,e)&&a.contains(p.vertices,e)){d.push(t);break}return d}},function(d,p,t){var I={};d.exports=I;var n=t(4),T=t(0),R=t(6),i=t(1),s=t(5),r=t(2),b=t(14);!function(){var a,o;"undefined"!=typeof window&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(function(){t(T.now())},1e3/60)},o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),I._goodFps=30,I._goodDelta=1e3/60,I.create=function(i){var e={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!i.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},t=T.extend(e,i);return t.canvas&&(t.canvas.width=t.options.width||t.canvas.width,t.canvas.height=t.options.height||t.canvas.height),t.mouse=i.mouse,t.engine=i.engine,t.canvas=t.canvas||d(t.options.width,t.options.height),t.context=t.canvas.getContext("2d"),t.textures={},t.bounds=t.bounds||{min:{x:0,y:0},max:{x:t.canvas.width,y:t.canvas.height}},t.controller=I,t.options.showBroadphase=!1,1!==t.options.pixelRatio&&I.setPixelRatio(t,t.options.pixelRatio),T.isElement(t.element)&&t.element.appendChild(t.canvas),t},I.run=function(e){!function t(i){e.frameRequestId=a(t),l(e,i),I.world(e,i),(e.options.showStats||e.options.showDebug)&&I.stats(e,e.context,i),(e.options.showPerformance||e.options.showDebug)&&I.performance(e,e.context,i)}()},I.stop=function(t){o(t.frameRequestId)},I.setPixelRatio=function(o,e){var s=o.options,n=o.canvas;"auto"===e&&(e=p(n)),s.pixelRatio=e,n.setAttribute("data-pixel-ratio",e),n.width=s.width*e,n.height=s.height*e,n.style.width=s.width+"px",n.style.height=s.height+"px"},I.lookAt=function(r,e,u,x){x=void 0===x||x,e=T.isArray(e)?e:[e],u=u||{x:0,y:0};for(var h={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},o=0;o<e.length;o+=1){var S=e[o],s=S.bounds?S.bounds.min:S.min||S.position||S,l=S.bounds?S.bounds.max:S.max||S.position||S;s&&l&&(s.x<h.min.x&&(h.min.x=s.x),l.x>h.max.x&&(h.max.x=l.x),s.y<h.min.y&&(h.min.y=s.y),l.y>h.max.y&&(h.max.y=l.y))}var c=h.max.x-h.min.x+2*u.x,d=h.max.y-h.min.y+2*u.y,p=r.canvas.height,f=r.canvas.width/p,v=c/d,y=1,P=1;v>f?P=v/f:y=f/v,r.options.hasBounds=!0,r.bounds.min.x=h.min.x,r.bounds.max.x=h.min.x+c*y,r.bounds.min.y=h.min.y,r.bounds.max.y=h.min.y+d*P,x&&(r.bounds.min.x+=.5*c-.5*(c*y),r.bounds.max.x+=.5*c-.5*(c*y),r.bounds.min.y+=.5*d-.5*(d*P),r.bounds.max.y+=.5*d-.5*(d*P)),r.bounds.min.x-=u.x,r.bounds.max.x-=u.x,r.bounds.min.y-=u.y,r.bounds.max.y-=u.y,r.mouse&&(b.setScale(r.mouse,{x:(r.bounds.max.x-r.bounds.min.x)/r.canvas.width,y:(r.bounds.max.y-r.bounds.min.y)/r.canvas.height}),b.setOffset(r.mouse,r.bounds.min))},I.startViewTransform=function(s){var e=s.bounds.max.x-s.bounds.min.x,t=s.bounds.max.y-s.bounds.min.y,n=e/s.options.width,i=t/s.options.height;s.context.setTransform(s.options.pixelRatio/n,0,0,s.options.pixelRatio/i,0,0),s.context.translate(-s.bounds.min.x,-s.bounds.min.y)},I.endViewTransform=function(t){t.context.setTransform(t.options.pixelRatio,0,0,t.options.pixelRatio,0,0)},I.world=function(t){var e,a=T.now(),o=t.engine,l=o.world,d=t.canvas,p=t.context,c=t.options,y=t.timing,g=R.allBodies(l),m=R.allConstraints(l),x=c.wireframes?c.wireframeBackground:c.background,h=[],v=[],f={timestamp:o.timing.timestamp};if(s.trigger(t,"beforeRender",f),t.currentBackground!==x&&u(t,x),p.globalCompositeOperation="source-in",p.fillStyle="transparent",p.fillRect(0,0,d.width,d.height),p.globalCompositeOperation="source-over",c.hasBounds){for(e=0;e<g.length;e++){var A=g[e];i.overlaps(A.bounds,t.bounds)&&h.push(A)}for(e=0;e<m.length;e++){var P=m[e],C=P.bodyA,M=P.bodyB,B=P.pointA,V=P.pointB;C&&(B=r.add(C.position,P.pointA)),M&&(V=r.add(M.position,P.pointB)),B&&V&&(i.contains(t.bounds,B)||i.contains(t.bounds,V))&&v.push(P)}I.startViewTransform(t),t.mouse&&(b.setScale(t.mouse,{x:(t.bounds.max.x-t.bounds.min.x)/t.options.width,y:(t.bounds.max.y-t.bounds.min.y)/t.options.height}),b.setOffset(t.mouse,t.bounds.min))}else v=m,h=g,1!==t.options.pixelRatio&&t.context.setTransform(t.options.pixelRatio,0,0,t.options.pixelRatio,0,0);!c.wireframes||o.enableSleeping&&c.showSleeping?I.bodies(t,h,p):(c.showConvexHulls&&I.bodyConvexHulls(t,h,p),I.bodyWireframes(t,h,p)),c.showBounds&&I.bodyBounds(t,h,p),(c.showAxes||c.showAngleIndicator)&&I.bodyAxes(t,h,p),c.showPositions&&I.bodyPositions(t,h,p),c.showVelocity&&I.bodyVelocity(t,h,p),c.showIds&&I.bodyIds(t,h,p),c.showSeparations&&I.separations(t,o.pairs.list,p),c.showCollisions&&I.collisions(t,o.pairs.list,p),c.showVertexNumbers&&I.vertexNumbers(t,h,p),c.showMousePosition&&I.mousePosition(t,t.mouse,p),I.constraints(v,p),c.hasBounds&&I.endViewTransform(t),s.trigger(t,"afterRender",f),y.lastElapsed=T.now()-a},I.stats=function(n,e){for(var t=n.engine,i=t.world,o=R.allBodies(i),a=0,r=0,y=0;y<o.length;y+=1)a+=o[y].parts.length;var g={Part:a,Body:o.length,Cons:R.allConstraints(i).length,Comp:R.allComposites(i).length,Pair:t.pairs.list.length};for(var m in e.fillStyle="#0e0f19",e.fillRect(r,0,302.5,44),e.font="12px Arial",e.textBaseline="top",e.textAlign="right",g){var d=g[m];e.fillStyle="#aaa",e.fillText(m,r+55,8),e.fillStyle="#eee",e.fillText(d,r+55,26),r+=55}},I.performance=function(i,e){var t=i.engine,n=i.timing,o=n.deltaHistory,r=n.elapsedHistory,a=n.timestampElapsedHistory,s=n.engineDeltaHistory,l=n.engineElapsedHistory,d=t.timing.lastDelta,c=x(o),p=x(r),u=x(s),h=x(l),y=x(a)/c||0,m=1e3/c||0;e.fillStyle="#0e0f19",e.fillRect(0,50,370,34),I.status(e,10,69,60,4,o.length,Math.round(m)+" fps",m/I._goodFps,function(t){return o[t]/c-1}),I.status(e,82,69,60,4,s.length,d.toFixed(2)+" dt",I._goodDelta/d,function(t){return s[t]/u-1}),I.status(e,154,69,60,4,l.length,h.toFixed(2)+" ut",1-h/I._goodFps,function(t){return l[t]/h-1}),I.status(e,226,69,60,4,r.length,p.toFixed(2)+" rt",1-p/I._goodFps,function(t){return r[t]/p-1}),I.status(e,298,69,60,4,a.length,y.toFixed(2)+" x",y*y*y,function(t){return(a[t]/o[t]/y||0)-1})},I.status=function(r,e,t,n,i,o,a,s,l){r.strokeStyle="#888",r.fillStyle="#444",r.lineWidth=1,r.fillRect(e,t+7,n,1),r.beginPath(),r.moveTo(e,t+7-i*T.clamp(.4*l(0),-2,2));for(var d=0;d<n;d+=1)r.lineTo(e+d,t+7-(d<o?i*T.clamp(.4*l(d),-2,2):0));r.stroke(),r.fillStyle="hsl("+T.clamp(25+95*s,0,120)+",100%,60%)",r.fillRect(e,t-7,4,4),r.font="12px Arial",r.textBaseline="middle",r.textAlign="right",r.fillStyle="#eee",r.fillText(a,e+n,t-5)},I.constraints=function(c,m){for(var t,x=m,n=0;n<c.length;n++)if(t=c[n],t.render.visible&&t.pointA&&t.pointB){var h,b,S=t.bodyA,l=t.bodyB;if(h=S?r.add(S.position,t.pointA):t.pointA,"pin"===t.render.type)x.beginPath(),x.arc(h.x,h.y,3,0,2*e),x.closePath();else{if(b=l?r.add(l.position,t.pointB):t.pointB,x.beginPath(),x.moveTo(h.x,h.y),"spring"===t.render.type)for(var u,P=r.sub(b,h),p=r.perp(r.normalise(P)),f=g(T.clamp(t.length/5,12,20)),v=1;v<f;v+=1)u=0==v%2?1:-1,x.lineTo(h.x+P.x*(v/f)+4*(p.x*u),h.y+P.y*(v/f)+4*(p.y*u));x.lineTo(b.x,b.y)}t.render.lineWidth&&(x.lineWidth=t.render.lineWidth,x.strokeStyle=t.render.strokeStyle,x.stroke()),t.render.anchors&&(x.fillStyle=t.render.strokeStyle,x.beginPath(),x.arc(h.x,h.y,3,0,2*e),x.arc(b.x,b.y,3,0,2*e),x.closePath(),x.fill())}},I.bodies=function(y,g,t){var n,m,x,h,v=t,s=(y.engine,y.options),l=s.showInternalEdges||!s.wireframes;for(x=0;x<g.length;x++)if((n=g[x]).render.visible)for(h=1<n.parts.length?1:0;h<n.parts.length;h++)if((m=n.parts[h]).render.visible){if(s.showSleeping&&n.isSleeping?v.globalAlpha=.5*m.render.opacity:1!==m.render.opacity&&(v.globalAlpha=m.render.opacity),m.render.sprite&&m.render.sprite.texture&&!s.wireframes){var b=m.render.sprite,u=c(y,b.texture);v.translate(m.position.x,m.position.y),v.rotate(m.angle),v.drawImage(u,u.width*-b.xOffset*b.xScale,u.height*-b.yOffset*b.yScale,u.width*b.xScale,u.height*b.yScale),v.rotate(-m.angle),v.translate(-m.position.x,-m.position.y)}else{if(m.circleRadius)v.beginPath(),v.arc(m.position.x,m.position.y,m.circleRadius,0,2*e);else{v.beginPath(),v.moveTo(m.vertices[0].x,m.vertices[0].y);for(var d=1;d<m.vertices.length;d++)!m.vertices[d-1].isInternal||l?v.lineTo(m.vertices[d].x,m.vertices[d].y):v.moveTo(m.vertices[d].x,m.vertices[d].y),m.vertices[d].isInternal&&!l&&v.moveTo(m.vertices[(d+1)%m.vertices.length].x,m.vertices[(d+1)%m.vertices.length].y);v.lineTo(m.vertices[0].x,m.vertices[0].y),v.closePath()}s.wireframes?(v.lineWidth=1,v.strokeStyle="#bbb",v.stroke()):(v.fillStyle=m.render.fillStyle,m.render.lineWidth&&(v.lineWidth=m.render.lineWidth,v.strokeStyle=m.render.strokeStyle,v.stroke()),v.fill())}v.globalAlpha=1}},I.bodyWireframes=function(d,e,t){var n,p,y,g,m,u=t,l=d.options.showInternalEdges;for(u.beginPath(),y=0;y<e.length;y++)if((n=e[y]).render.visible)for(m=1<n.parts.length?1:0;m<n.parts.length;m++){for(p=n.parts[m],u.moveTo(p.vertices[0].x,p.vertices[0].y),g=1;g<p.vertices.length;g++)!p.vertices[g-1].isInternal||l?u.lineTo(p.vertices[g].x,p.vertices[g].y):u.moveTo(p.vertices[g].x,p.vertices[g].y),p.vertices[g].isInternal&&!l&&u.moveTo(p.vertices[(g+1)%p.vertices.length].x,p.vertices[(g+1)%p.vertices.length].y);u.lineTo(p.vertices[0].x,p.vertices[0].y)}u.lineWidth=1,u.strokeStyle="#bbb",u.stroke()},I.bodyConvexHulls=function(s,e,t){var n,l,d,p=t;for(p.beginPath(),l=0;l<e.length;l++)if((n=e[l]).render.visible&&1!==n.parts.length){for(p.moveTo(n.vertices[0].x,n.vertices[0].y),d=1;d<n.vertices.length;d++)p.lineTo(n.vertices[d].x,n.vertices[d].y);p.lineTo(n.vertices[0].x,n.vertices[0].y)}p.lineWidth=1,p.strokeStyle="rgba(255,255,255,0.2)",p.stroke()},I.vertexNumbers=function(d,e,t){var n,p,c,y=t;for(n=0;n<e.length;n++){var a=e[n].parts;for(c=1<a.length?1:0;c<a.length;c++){var s=a[c];for(p=0;p<s.vertices.length;p++)y.fillStyle="rgba(255,255,255,0.2)",y.fillText(n+"_"+p,s.position.x+.8*(s.vertices[p].x-s.position.x),s.position.y+.8*(s.vertices[p].y-s.position.y))}}},I.mousePosition=function(o,e,t){var n=t;n.fillStyle="rgba(255,255,255,0.8)",n.fillText(e.position.x+"  "+e.position.y,e.position.x+5,e.position.y-5)},I.bodyBounds=function(d,e,t){var n=t,i=(d.engine,d.options);n.beginPath();for(var o=0;o<e.length;o++)if(e[o].render.visible)for(var p,c=e[o].parts,a=1<c.length?1:0;a<c.length;a++)p=c[a],n.rect(p.bounds.min.x,p.bounds.min.y,p.bounds.max.x-p.bounds.min.x,p.bounds.max.y-p.bounds.min.y);n.strokeStyle=i.wireframes?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.1)",n.lineWidth=1,n.stroke()},I.bodyAxes=function(p,e,t){var n,y,g,m,x=t,s=(p.engine,p.options);for(x.beginPath(),y=0;y<e.length;y++){var l=e[y],c=l.parts;if(l.render.visible)if(s.showAxes)for(g=1<c.length?1:0;g<c.length;g++)for(n=c[g],m=0;m<n.axes.length;m++){var u=n.axes[m];x.moveTo(n.position.x,n.position.y),x.lineTo(n.position.x+20*u.x,n.position.y+20*u.y)}else for(g=1<c.length?1:0;g<c.length;g++)for(n=c[g],m=0;m<n.axes.length;m++)x.moveTo(n.position.x,n.position.y),x.lineTo((n.vertices[0].x+n.vertices[n.vertices.length-1].x)/2,(n.vertices[0].y+n.vertices[n.vertices.length-1].y)/2)}s.wireframes?(x.strokeStyle="indianred",x.lineWidth=1):(x.strokeStyle="rgba(255, 255, 255, 0.4)",x.globalCompositeOperation="overlay",x.lineWidth=2),x.stroke(),x.globalCompositeOperation="source-over"},I.bodyPositions=function(d,p,t){var n,c,y,g,m=t,s=(d.engine,d.options);for(m.beginPath(),y=0;y<p.length;y++)if((n=p[y]).render.visible)for(g=0;g<n.parts.length;g++)c=n.parts[g],m.arc(c.position.x,c.position.y,3,0,2*e,!1),m.closePath();for(m.fillStyle=s.wireframes?"indianred":"rgba(0,0,0,0.5)",m.fill(),m.beginPath(),y=0;y<p.length;y++)(n=p[y]).render.visible&&(m.arc(n.positionPrev.x,n.positionPrev.y,2,0,2*e,!1),m.closePath());m.fillStyle="rgba(255,165,0,0.8)",m.fill()},I.bodyVelocity=function(o,e,t){var l=t;l.beginPath();for(var i,d=0;d<e.length;d++)if(i=e[d],i.render.visible){var p=n.getVelocity(i);l.moveTo(i.position.x,i.position.y),l.lineTo(i.position.x+p.x,i.position.y+p.y)}l.lineWidth=3,l.strokeStyle="cornflowerblue",l.stroke()},I.bodyIds=function(l,e,t){var n,d,p=t;for(n=0;n<e.length;n++)if(e[n].render.visible){var r=e[n].parts;for(d=1<r.length?1:0;d<r.length;d++){var a=r[d];p.font="12px Arial",p.fillStyle="rgba(255,255,255,0.5)",p.fillText(a.id,a.position.x+10,a.position.y-10)}}},I.collisions=function(p,e,t){var n,y,g,m,x=t,s=p.options;for(x.beginPath(),g=0;g<e.length;g++)if((n=e[g]).isActive)for(y=n.collision,m=0;m<n.activeContacts.length;m++){var l=n.activeContacts[m].vertex;x.rect(l.x-1.5,l.y-1.5,3.5,3.5)}for(x.fillStyle=s.wireframes?"rgba(255,255,255,0.7)":"orange",x.fill(),x.beginPath(),g=0;g<e.length;g++)if((n=e[g]).isActive&&(y=n.collision,0<n.activeContacts.length)){var c=n.activeContacts[0].vertex.x,h=n.activeContacts[0].vertex.y;2===n.activeContacts.length&&(c=(n.activeContacts[0].vertex.x+n.activeContacts[1].vertex.x)/2,h=(n.activeContacts[0].vertex.y+n.activeContacts[1].vertex.y)/2),y.bodyB===y.supports[0].body||!0===y.bodyA.isStatic?x.moveTo(c-8*y.normal.x,h-8*y.normal.y):x.moveTo(c+8*y.normal.x,h+8*y.normal.y),x.lineTo(c,h)}x.strokeStyle=s.wireframes?"rgba(255,165,0,0.7)":"orange",x.lineWidth=1,x.stroke()},I.separations=function(d,e,t){var n,p,y,g,m,x=t,l=d.options;for(x.beginPath(),m=0;m<e.length;m++)if((n=e[m]).isActive){y=(p=n.collision).bodyA;var c=1;(g=p.bodyB).isStatic||y.isStatic||(c=.5),g.isStatic&&(c=0),x.moveTo(g.position.x,g.position.y),x.lineTo(g.position.x-p.penetration.x*c,g.position.y-p.penetration.y*c),c=1,g.isStatic||y.isStatic||(c=.5),y.isStatic&&(c=0),x.moveTo(y.position.x,y.position.y),x.lineTo(y.position.x+p.penetration.x*c,y.position.y+p.penetration.y*c)}x.strokeStyle=l.wireframes?"rgba(255,165,0,0.5)":"orange",x.stroke()},I.inspector=function(y,g){y.engine;var t,m=y.selected,i=y.render,o=i.options;if(o.hasBounds){var r=i.bounds.max.x-i.bounds.min.x,a=i.bounds.max.y-i.bounds.min.y,s=r/i.options.width,l=a/i.options.height;g.scale(1/s,1/l),g.translate(-i.bounds.min.x,-i.bounds.min.y)}for(var c,x=0;x<m.length;x++){switch(c=m[x].data,g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.9)",g.setLineDash([1,2]),c.type){case"body":t=c.bounds,g.beginPath(),g.rect(oe(t.min.x-3),oe(t.min.y-3),oe(t.max.x-t.min.x+6),oe(t.max.y-t.min.y+6)),g.closePath(),g.stroke();break;case"constraint":var h=c.pointA;c.bodyA&&(h=c.pointB),g.beginPath(),g.arc(h.x,h.y,10,0,2*e),g.closePath(),g.stroke();}g.setLineDash([]),g.translate(-.5,-.5)}null!==y.selectStart&&(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.6)",g.fillStyle="rgba(255,165,0,0.1)",t=y.selectBounds,g.beginPath(),g.rect(oe(t.min.x),oe(t.min.y),oe(t.max.x-t.min.x),oe(t.max.y-t.min.y)),g.closePath(),g.stroke(),g.fill(),g.translate(-.5,-.5)),o.hasBounds&&g.setTransform(1,0,0,1,0,0)};var l=function(i,e){var t=i.engine,n=i.timing,o=n.historySize,s=t.timing.timestamp;n.delta=e-n.lastTime||I._goodDelta,n.lastTime=e,n.timestampElapsed=s-n.lastTimestamp||0,n.lastTimestamp=s,n.deltaHistory.unshift(n.delta),n.deltaHistory.length=K(n.deltaHistory.length,o),n.engineDeltaHistory.unshift(t.timing.lastDelta),n.engineDeltaHistory.length=K(n.engineDeltaHistory.length,o),n.timestampElapsedHistory.unshift(n.timestampElapsed),n.timestampElapsedHistory.length=K(n.timestampElapsedHistory.length,o),n.engineElapsedHistory.unshift(t.timing.lastElapsed),n.engineElapsedHistory.length=K(n.engineElapsedHistory.length,o),n.elapsedHistory.unshift(n.lastElapsed),n.elapsedHistory.length=K(n.elapsedHistory.length,o)},x=function(i){for(var e=0,o=0;o<i.length;o+=1)e+=i[o];return e/i.length||0},d=function(i,e){var t=document.createElement("canvas");return t.width=i,t.height=e,t.oncontextmenu=function(){return!1},t.onselectstart=function(){return!1},t},p=function(i){var e=i.getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},c=function(i,e){var t=i.textures[e];return t||((t=i.textures[e]=new Image).src=e,t)},u=function(i,e){var t=e;/(jpg|gif|png)$/.test(e)&&(t="url("+e+")"),i.canvas.style.background=t,i.canvas.style.backgroundSize="contain",i.currentBackground=e}}()},function(s,e,t){var l={};s.exports=l;var d=t(5),o=t(17),i=t(0);!function(){var s,a,r;("undefined"!=typeof window&&(s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),s)||(s=function(t){r=setTimeout(function(){t(i.now())},1e3/60)},a=function(){clearTimeout(r)}),l.create=function(o){var e=i.extend({fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},o);return e.delta=e.delta||1e3/e.fps,e.deltaMin=e.deltaMin||1e3/e.fps,e.deltaMax=e.deltaMax||1e3/(.5*e.fps),e.fps=1e3/e.delta,e},l.run=function(e,i){return void 0!==e.positionIterations&&(i=e,e=l.create()),function t(o){e.frameRequestId=s(t),o&&e.enabled&&l.tick(e,i,o)}(),e},l.tick=function(r,e,t){var n,l=e.timing;r.isFixed?n=r.delta:(n=t-r.timePrev||r.delta,r.timePrev=t,r.deltaHistory.push(n),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),n=(n=(n=K.apply(null,r.deltaHistory))<r.deltaMin?r.deltaMin:n)>r.deltaMax?r.deltaMax:n,r.delta=n);var a={timestamp:l.timestamp};d.trigger(r,"beforeTick",a),r.frameCounter+=1,1e3<=t-r.counterTimestamp&&(r.fps=r.frameCounter*((t-r.counterTimestamp)/1e3),r.counterTimestamp=t,r.frameCounter=0),d.trigger(r,"tick",a),d.trigger(r,"beforeUpdate",a),o.update(e,n),d.trigger(r,"afterUpdate",a),d.trigger(r,"afterTick",a)},l.stop=function(t){a(t.frameRequestId)},l.start=function(i,e){l.run(i,e)}}()},function(s,e,t){var n={};s.exports=n;var i=t(8),o=t(0).deprecated;n.collides=function(o,e){return i.collides(o,e)},o(n,"collides","SAT.collides \u27A4 replaced by Collision.collides")},function(s,e,t){var a={};s.exports=a,t(1);var i=t(0);a.pathToVertices=function(o,e){"undefined"==typeof window||"SVGPathSeg"in window||i.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var S,P,A,w,C,B,_,I,T,k,M,R=[],y=0,V=0,E=0;e=e||15;var D=function(s,e,t){var n=1==t%2&&1<t;if(!T||s!=T.x||e!=T.y){T&&n?(k=T.x,M=T.y):(k=0,M=0);var i={x:k+s,y:M+e};!n&&T||(T=i),R.push(i),V=k+s,E=M+e}},h=function(i){var e=i.pathSegTypeAsLetter.toUpperCase();"Z"!==e&&("M"===e||"L"===e||"T"===e||"C"===e||"S"===e||"Q"===e?(V=i.x,E=i.y):"H"===e?V=i.x:"V"===e?E=i.y:void 0,D(V,E,i.pathSegType))};for(a._svgPathToAbsolute(o),A=o.getTotalLength(),B=[],S=0;S<o.pathSegList.numberOfItems;S+=1)B.push(o.pathSegList.getItem(S));for(_=B.concat();y<A;){if((C=B[o.getPathSegAtLength(y)])!=I){for(;_.length&&_[0]!=C;)h(_.shift());I=C}switch(C.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":w=o.getPointAtLength(y),D(w.x,w.y,0);}y+=e}for(S=0,P=_.length;S<P;++S)h(_[S]);return R},a._svgPathToAbsolute=function(y){for(var e,g,m,x,h,v,b=y.pathSegList,s=0,S=0,P=b.numberOfItems,u=0;u<P;++u){var A=b.getItem(u),p=A.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in A&&(s=A.x),"y"in A&&(S=A.y);else switch("x1"in A&&(m=s+A.x1),"x2"in A&&(h=s+A.x2),"y1"in A&&(x=S+A.y1),"y2"in A&&(v=S+A.y2),"x"in A&&(s+=A.x),"y"in A&&(S+=A.y),p){case"m":b.replaceItem(y.createSVGPathSegMovetoAbs(s,S),u);break;case"l":b.replaceItem(y.createSVGPathSegLinetoAbs(s,S),u);break;case"h":b.replaceItem(y.createSVGPathSegLinetoHorizontalAbs(s),u);break;case"v":b.replaceItem(y.createSVGPathSegLinetoVerticalAbs(S),u);break;case"c":b.replaceItem(y.createSVGPathSegCurvetoCubicAbs(s,S,m,x,h,v),u);break;case"s":b.replaceItem(y.createSVGPathSegCurvetoCubicSmoothAbs(s,S,h,v),u);break;case"q":b.replaceItem(y.createSVGPathSegCurvetoQuadraticAbs(s,S,m,x),u);break;case"t":b.replaceItem(y.createSVGPathSegCurvetoQuadraticSmoothAbs(s,S),u);break;case"a":b.replaceItem(y.createSVGPathSegArcAbs(s,S,A.r1,A.r2,A.angle,A.largeArcFlag,A.sweepFlag),u);break;case"z":case"Z":s=e,S=g;}"M"!=p&&"m"!=p||(e=s,g=S)}}},function(s,e,t){var n={};s.exports=n;var i=t(6);t(0),n.create=i.create,n.add=i.add,n.remove=i.remove,n.clear=i.clear,n.addComposite=i.addComposite,n.addBody=i.addBody,n.addConstraint=i.addConstraint}])});