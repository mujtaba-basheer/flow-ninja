window.addEventListener("load",()=>{const a=document.body,b=document.getElementById("trail-effect"),c={lerp:(c,a,b)=>(1-b)*c+b*a,distance:(a,b,c,d)=>Math.hypot(c-a,d-b)},d=b=>{let c=0,d=0;return b||(b=window.event),b.pageX||b.pageY?(c=b.pageX,d=b.pageY):(b.clientX||b.clientY)&&(c=b.clientX+a.scrollLeft+docEl.scrollLeft,d=b.clientY+a.scrollTop+docEl.scrollTop),{x:c,y:d}};let e=lastMousePos=cacheMousePos={x:0,y:b.offsetTop};b.addEventListener("mousemove",a=>{991>window.innerWidth||(e=d(a))});const f=()=>c.distance(e.x,e.y,lastMousePos.x,lastMousePos.y);class g{constructor(a){this.DOM={el:a},this.defaultStyle={scale:1,x:0,y:b.offsetTop,opacity:0},this.getRect(),this.initEvents()}initEvents(){window.addEventListener("resize",()=>this.resize())}resize(){TweenMax.set(this.DOM.el,this.defaultStyle),this.getRect()}getRect(){this.rect=this.DOM.el.getBoundingClientRect()}isActive(){return TweenMax.isTweening(this.DOM.el)||0!=this.DOM.el.style.opacity}}class h{constructor(){this.DOM={content:document.querySelector(".content")},this.images=[],[...this.DOM.content.querySelectorAll("img")].forEach(a=>this.images.push(new g(a))),this.imagesTotal=this.images.length,this.imgPosition=0,this.zIndexVal=1,this.threshold=100,requestAnimationFrame(()=>this.render())}render(){let a=f();cacheMousePos.x=c.lerp(cacheMousePos.x||e.x,e.x,.1),cacheMousePos.y=c.lerp(cacheMousePos.y||e.y,e.y,.1),a>this.threshold&&(this.showNextImage(),++this.zIndexVal,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0,lastMousePos=e);let b=!0;for(let a of this.images)if(a.isActive()){b=!1;break}b&&1!==this.zIndexVal&&(this.zIndexVal=1),requestAnimationFrame(()=>this.render())}showNextImage(){const a=this.images[this.imgPosition];TweenMax.killTweensOf(a.DOM.el),new TimelineMax().set(a.DOM.el,{startAt:{opacity:0,scale:1},opacity:1,scale:1,zIndex:this.zIndexVal,x:cacheMousePos.x-a.rect.width/2,y:cacheMousePos.y-a.rect.height/2},0).to(a.DOM.el,.9,{ease:Expo.easeOut,x:e.x-a.rect.width/2,y:e.y-a.rect.height/2},0).to(a.DOM.el,1,{ease:Power1.easeOut,opacity:0},.4).to(a.DOM.el,1,{ease:Quint.easeOut,scale:.2},.4)}}(()=>new Promise(a=>{imagesLoaded(document.querySelectorAll(".content__img"),a)}))().then(()=>{document.body.classList.remove("loading"),new h})});