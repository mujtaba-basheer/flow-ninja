const getJobs=()=>new Promise((a,b)=>{fetch("https://6b9d3y1jhj.execute-api.us-east-1.amazonaws.com/prod/jobs",{method:"GET"}).then(a=>a.json()).then(a).catch(b)}),renderJobs=a=>{const b=document.querySelector(".container > .open-positions-wrapper"),c=document.querySelector("div#no-results");if(b){b.querySelectorAll("div#job-link").forEach(a=>a.remove()),b.querySelectorAll("div.open-position-link").forEach(a=>a.remove());for(let c=a.length-1;0<=c;c--){const{branch:d,department:e,location:f,title:g}=a[c],h=document.createElement("div");h.className="open-position-link w-inline-block";{const a=document.createElement("div");a.className="column";{const b=document.createElement("h3");b.className="margin-bot-xs",b.textContent=g;const c=document.createElement("div");c.className="position-details-wrap";{const a=document.createElement("div");a.className="bold-text",a.textContent=d;const b=document.createElement("div");b.textContent=e;const g=document.createElement("div");g.textContent=f,c.appendChild(a),c.appendChild(b),c.appendChild(g)}a.appendChild(b),a.appendChild(c)}const b=document.createElement("img");b.className="benefits-dropdown-icon",b.src="https://assets-global.website-files.com/6267a1f7a8182aa6e6312ff3/6321ec3b48e94304a0437292_chevron_right.svg",b.loading="lazy",b.alt="",h.appendChild(a),h.appendChild(b)}h.addEventListener("click",()=>openJobPopup(a[c])),b.appendChild(h)}}c&&(c.style.display=0<a.length?"none":"block")},renderFilterOptions=a=>{const b=document.getElementById("wf-form-Career-Form");if(b){const c=b.querySelector("select[name=\"field\"]");c&&($(c).niceSelect("destroy"),c.querySelectorAll("option").forEach((a,b)=>0!==b&&a.remove()),a.entryLevel.forEach(a=>{const b=document.createElement("option");b.value=a,b.text=a,c.appendChild(b)}),$(c).niceSelect());const d=b.querySelector("select[name=\"field-2\"]");d&&($(d).niceSelect("destroy"),d.querySelectorAll("option").forEach((a,b)=>0!==b&&a.remove()),a.department.forEach(a=>{const b=document.createElement("option");b.value=a,b.text=a,d.appendChild(b)}),$(d).niceSelect());const e=b.querySelector("select[name=\"field-3\"]");e&&($(e).niceSelect("destroy"),e.querySelectorAll("option").forEach((a,b)=>0!==b&&a.remove()),a.location.forEach(a=>{const b=document.createElement("option");b.value=a,b.text=a,e.appendChild(b)}),$(e).niceSelect())}},getFilterOptions=a=>{const b=new Set,c=new Set,d=new Set;for(const e of a){const{level:a,department:f,location:g}=e;b.has(a)||b.add(a),c.has(f)||c.add(f),d.has(g)||d.add(g)}return{entryLevel:Array.from(b),department:Array.from(c),location:Array.from(d)}},openJobPopup=a=>{const b=a=>{let b=a;return b=b.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;/g,"&"),b},c=document.querySelector("div.job-description-popup");if(c){document.body.style.overflow="hidden",c.style.display="flex",$(c).animate({opacity:"1"});const{title:d,url:e,text:{description:f,tasksTitle:g,tasks:h,profileTitle:i,profile:j,benefitsTitle:k,benefits:l}}=a,m=c.querySelector("h3#job-name");m&&(m.textContent=d);const n=c.querySelector("div.job-description.w-richtext");if(n){if(n.querySelectorAll("p, h4").forEach(a=>a.remove()),f){const a=document.createElement("p");a.innerHTML=b(f),n.appendChild(a)}if(g){const a=document.createElement("h4");a.textContent=g,n.appendChild(a)}if(h){const a=document.createElement("p");a.innerHTML=b(h),n.appendChild(a)}if(i){const a=document.createElement("h4");a.textContent=i,n.appendChild(a)}if(j){const a=document.createElement("p");a.innerHTML=b(j),n.appendChild(a)}if(k){const a=document.createElement("h4");a.textContent=k,n.appendChild(a)}if(l){const a=document.createElement("p");a.innerHTML=b(l),n.appendChild(a)}}const o=c.querySelector("a#apply-link");o&&(o.href=e,o.target="_blank")}};window.addEventListener("load",async()=>{try{const a=new URLSearchParams(window.location.search),b=a.get("role"),c=a.get("entryLevel"),d=a.get("department"),e=a.get("location"),f={jobs:{eng:[],ger:[]},filters:{role:b?decodeURIComponent(b):"",entryLevel:c?decodeURIComponent(c):"",department:d?decodeURIComponent(d):"",location:e?decodeURIComponent(e):""},lang:"en",filterOptions:{eng:{entryLevel:[],department:[],location:[]},ger:{entryLevel:[],department:[],location:[]}}},g=window.Weglot||{},h=await getJobs(),{data:{eng:i,ger:j}}=h;f.jobs.eng=i,f.jobs.ger=j,f.filterOptions.eng=getFilterOptions(i),f.filterOptions.ger=getFilterOptions(j),f.lang=g.getCurrentLang();const k=document.querySelector("div#jobs-preloader");k&&(k.style.display="none"),renderFilterOptions(f.filterOptions["de"===f.lang?"ger":"eng"]);const l=()=>{const{filters:a,lang:b}=f,c=f.jobs["de"===b?"ger":"eng"],d=[];for(const b of c){const{title:c,level:e,department:f,location:g}=b;let h=!0;a.role&&(h=c.toLowerCase().includes(a.role.toLowerCase())),h&&a.entryLevel&&(h=e===a.entryLevel),h&&a.department&&(h=f===a.department),h&&a.location&&(h=g===a.location),h&&d.push(b)}renderJobs(d)};l();const m=document.getElementById("wf-form-Career-Form");if(m){const a=()=>{const a={role:"",entryLevel:"",department:"",location:""},b=m.querySelector("input[name=\"Role\"]");b&&(a.role=b.value);const c=m.querySelector("select[name=\"field\"]");c&&(a.entryLevel=c.value);const d=m.querySelector("select[name=\"field-2\"]");d&&(a.department=d.value);const e=m.querySelector("select[name=\"field-3\"]");e&&(a.location=e.value),f.filters=a,console.log(a),l()};m.addEventListener("submit",b=>{b.preventDefault(),b.stopImmediatePropagation(),a()})}g.on("languageChanged",a=>{f.lang=a,renderJobs(f.jobs["de"===a?"ger":"eng"]),renderFilterOptions(f.filterOptions["de"===a?"ger":"eng"]),f.filters={role:"",entryLevel:"",department:"",location:""}});const n=document.querySelector("button#reset-filter-job");n&&n.addEventListener("click",()=>{f.filters={role:"",entryLevel:"",department:"",location:""},renderFilterOptions(f.filterOptions["de"===f.lang?"ger":"eng"]),l()})}catch(a){console.error(a)}});