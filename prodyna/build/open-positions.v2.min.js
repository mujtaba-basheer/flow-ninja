const getJobs=()=>new Promise((a,b)=>{fetch("https://6b9d3y1jhj.execute-api.us-east-1.amazonaws.com/prod/jobs",{method:"GET"}).then(a=>a.json()).then(a).catch(b)}),renderJobs=a=>{const b=document.querySelector(".container > .open-positions-wrapper"),c=document.querySelector("div#no-results");if(b){b.querySelectorAll("div#job-link").forEach(a=>a.remove()),b.querySelectorAll("div.open-position-link").forEach(a=>a.remove());for(let c=a.length-1;0<=c;c--){const{branch:d,department:e,location:f,title:g}=a[c],h=document.createElement("div");h.className="open-position-link w-inline-block";{const a=document.createElement("div");a.className="column";{const b=document.createElement("h3");b.className="margin-bot-xs",b.textContent=g;const c=document.createElement("div");c.className="position-details-wrap";{const a=document.createElement("div");a.className="bold-text",a.textContent=d;const b=document.createElement("div");b.textContent=e;const g=document.createElement("div");g.textContent=f,c.appendChild(a),c.appendChild(b),c.appendChild(g)}a.appendChild(b),a.appendChild(c)}const b=document.createElement("img");b.className="benefits-dropdown-icon",b.src="https://assets-global.website-files.com/6267a1f7a8182aa6e6312ff3/6321ec3b48e94304a0437292_chevron_right.svg",b.loading="lazy",b.alt="",h.appendChild(a),h.appendChild(b)}h.addEventListener("click",()=>openJobPopup(a[c])),b.appendChild(h)}}c&&(c.style.display=0<a.length?"none":"block")},renderFilterOptions=(a,b)=>{const c=document.getElementById("wf-form-Career-Form");if(c){const d=c.querySelector("input[name=\"Role\"]");d&&(null===b||void 0===b?void 0:b.role)&&(d.value=b.role);const e=c.querySelector("select[name=\"field\"]");e&&($(e).niceSelect("destroy"),e.querySelectorAll("option").forEach((a,b)=>0!==b&&a.remove()),a.country.forEach(a=>{const b=document.createElement("option");b.value=a,b.text=a,e.appendChild(b)}),$(e).niceSelect(),(null===b||void 0===b?void 0:b.country)&&(e.value=b.country,$(e).niceSelect("update")));const f=c.querySelector("select[name=\"field-2\"]");f&&($(f).niceSelect("destroy"),f.querySelectorAll("option").forEach((a,b)=>0!==b&&a.remove()),a.office.forEach(a=>{const b=document.createElement("option");b.value=a,b.text=a,f.appendChild(b)}),$(f).niceSelect(),(null===b||void 0===b?void 0:b.office)&&(f.value=b.office),$(f).niceSelect("update"));const g=c.querySelector("select[name=\"field-3\"]");g&&($(g).niceSelect("destroy"),g.querySelectorAll("option").forEach((a,b)=>0!==b&&a.remove()),a.career_path.forEach(a=>{const b=document.createElement("option");b.value=a,b.text=a,g.appendChild(b)}),$(g).niceSelect(),(null===b||void 0===b?void 0:b.career_path)&&(g.value=b.career_path),$(g).niceSelect("update"))}window.history.pushState("",document.title,window.location.pathname)},getFilterOptions=a=>{const b=new Set,c=new Set,d=new Set;for(const e of a){const{country:a,department:f,location:g}=e;b.has(a)||b.add(a),c.has(g)||c.add(g),d.has(f)||d.add(f)}return{country:Array.from(b),office:Array.from(c),career_path:Array.from(d)}},openJobPopup=a=>{const b=a=>{let b=a;return b=b.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;/g,"&"),b},c=document.querySelector("div.job-description-popup");if(c){document.body.style.overflow="hidden",c.style.display="flex",$(c).animate({opacity:"1"});const{title:d,url:e,text:{description:f,tasksTitle:g,tasks:h,profileTitle:i,profile:j,benefitsTitle:k,benefits:l}}=a,m=c.querySelector("h3#job-name");m&&(m.textContent=d);const n=c.querySelector("div.job-description.w-richtext");if(n){if(n.querySelectorAll("p, h4").forEach(a=>a.remove()),f){const a=document.createElement("p");a.innerHTML=b(f),n.appendChild(a)}if(g){const a=document.createElement("h4");a.textContent=g,n.appendChild(a)}if(h){const a=document.createElement("p");a.innerHTML=b(h),n.appendChild(a)}if(i){const a=document.createElement("h4");a.textContent=i,n.appendChild(a)}if(j){const a=document.createElement("p");a.innerHTML=b(j),n.appendChild(a)}if(k){const a=document.createElement("h4");a.textContent=k,n.appendChild(a)}if(l){const a=document.createElement("p");a.innerHTML=b(l),n.appendChild(a)}}const o=c.querySelector("a#apply-link");o&&(o.href=e,o.target="_blank")}};window.addEventListener("load",async()=>{try{const a=new URLSearchParams(window.location.search),b=a.get("role"),c=a.get("country"),d=a.get("office"),e=a.get("career_path"),f={jobs:[],filters:{role:b?decodeURIComponent(b):"",country:c?decodeURIComponent(c):"",office:d?decodeURIComponent(d):"",career_path:e?decodeURIComponent(e):""},lang:"en",filterOptions:{country:[],office:[],career_path:[]}},g=window.Weglot||{},h=await getJobs(),{data:{eng:i,ger:j}}=h;f.jobs=[...i,...j],f.filterOptions=getFilterOptions(f.jobs),console.log({filterOptions:f.filterOptions}),f.lang=g.getCurrentLang();const k=document.querySelector("div#jobs-preloader");k&&(k.style.display="none"),renderFilterOptions(f.filterOptions,f.filters);const l=()=>{const{filters:a,jobs:b}=f,c=[];for(const d of b){const{title:b,department:e,location:f,country:g}=d;let h=!0;a.role&&(h=b.toLowerCase().includes(a.role.toLowerCase())),h&&a.country&&(h=g===a.country),h&&a.office&&(h=f===a.office),h&&a.career_path&&(h=e===a.career_path),h&&c.push(d)}renderJobs(c)};l();const m=document.getElementById("wf-form-Career-Form");if(m){const a=()=>{const a={role:"",country:"",office:"",career_path:""},b=m.querySelector("input[name=\"Role\"]");b&&(a.role=b.value);const c=m.querySelector("select[name=\"field\"]");c&&(a.country=c.value);const d=m.querySelector("select[name=\"field-2\"]");d&&(a.office=d.value);const e=m.querySelector("select[name=\"field-3\"]");e&&(a.career_path=e.value),f.filters=a,console.log(a),l()};m.addEventListener("submit",b=>{b.preventDefault(),b.stopImmediatePropagation(),a()})}const n=document.querySelector("button#reset-filter-job");n&&n.addEventListener("click",()=>{f.filters={role:"",country:"",office:"",career_path:""},renderFilterOptions(f.filterOptions),l()})}catch(a){console.error(a)}});