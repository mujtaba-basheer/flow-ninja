const getStats=()=>new Promise((a,b)=>{fetch("https://6b9d3y1jhj.execute-api.us-east-1.amazonaws.com/prod/stats",{method:"GET"}).then(a=>a.json()).then(a).catch(b)}),renderFilterOptions=a=>{const b=document.getElementById("wf-form-Career-Form");if(b){const c=b.querySelector("select[name=\"field\"]");c&&($(c).niceSelect("destroy"),c.querySelectorAll("option").forEach((a,b)=>0!==b&&a.remove()),a.levels.details.forEach(a=>{const b=document.createElement("option");b.value=a.name,b.text=a.name,c.appendChild(b)}),$(c).niceSelect());const d=b.querySelector("select[name=\"field-2\"]");d&&($(d).niceSelect("destroy"),d.querySelectorAll("option").forEach((a,b)=>0!==b&&a.remove()),a.departments.details.forEach(a=>{const b=document.createElement("option");b.value=a.name,b.text=a.name,d.appendChild(b)}),$(d).niceSelect());const e=b.querySelector("select[name=\"field-3\"]");e&&($(e).niceSelect("destroy"),e.querySelectorAll("option").forEach((a,b)=>0!==b&&a.remove()),a.locations.details.forEach(a=>{const b=document.createElement("option");b.value=a.name,b.text=a.name,e.appendChild(b)}),$(e).niceSelect())}};window.addEventListener("load",async()=>{try{const{data:{eng:a,ger:b}}=await getStats(),c=window.Weglot||{},d=c.getCurrentLang(),e=document.querySelector("div#jobs-preloader");e&&(e.style.display="none");const f=a=>{const b=document.getElementById("open-roles");if(b){const{total:c,departments:d,locations:e}=a,f=b.querySelector("h2");f&&(f.innerHTML=`${c} Open Positions<br />in ${e.total} Locations`);const g=b.querySelectorAll("h3");for(let a=0;a<g.length;a++){const b=g[a],{name:c,openPositions:e}=d.details[a];b.textContent=`${e} Job${1<e?"s":""} for ${c}`}}};renderFilterOptions("de"===d?b:a),f("de"===d?b:a);const g=document.getElementById("wf-form-Career-Form");if(g){const a=()=>{const a={role:"",entryLevel:"",department:"",location:""},b=g.querySelector("input[name=\"Role\"]");b&&(a.role=b.value);const c=g.querySelector("select[name=\"field\"]");c&&(a.entryLevel=c.value);const d=g.querySelector("select[name=\"field-2\"]");d&&(a.department=d.value);const e=g.querySelector("select[name=\"field-3\"]");e&&(a.location=e.value);const f=new URLSearchParams;for(const b of Object.keys(a))f.set(b,a[b]);window.location.href=`https://${window.location.hostname}/jobs?${f.toString()}`};g.addEventListener("submit",b=>{b.preventDefault(),b.stopImmediatePropagation(),a()})}c.on("languageChanged",c=>{renderFilterOptions("de"===c?b:a),f("de"===c?b:a)})}catch(a){console.error(a)}});