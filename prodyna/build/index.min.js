const state={items:[],inputEl:null,autoEl:null},slugify=a=>a.trim().toLowerCase().split(" ").join("-"),handleInput=()=>{const{items:a,inputEl:b,autoEl:c}=state;if(b&&c){const d=b.value;if(d){const b=a.find(a=>a.value.original.startsWith(d));b?(c.textContent=b.value.original,b.value.original===d?c.removeAttribute("tabindex"):c.setAttribute("tabindex","0")):(c.textContent="",c.removeAttribute("tabindex"));const e=slugify(d);for(const b of a)b.value.slug.includes(e)?b.element.classList.remove("search-item-out"):b.element.classList.add("search-item-out")}else{c.textContent="",c.removeAttribute("tabindex");for(const b of a)b.element.classList.remove("search-item-out")}}},handleSubmit=a=>{a.preventDefault(),a.stopImmediatePropagation();const{inputEl:b}=state;if(b){const a=b.value;a&&(window.location.href=`https://${window.location.hostname}/search?query=${encodeURIComponent(a)}`)}},handleFocus=()=>{const{inputEl:a,autoEl:b}=state;if(a&&b){const c=b.textContent;c&&(a.value=c,a.focus({preventScroll:!0}))}};window.addEventListener("load",()=>{var a;const b=document.querySelectorAll("a.search-item");for(const c of b){const b=(null===(a=null===c||void 0===c?void 0:c.textContent)||void 0===a?void 0:a.trim())||"";state.items.push({element:c,value:{original:b,slug:b.toLowerCase().split(" ").join("-")}}),c.setAttribute("href",`/search?query=${encodeURIComponent(b)}`)}const c=document.getElementById("search");if(c){state.inputEl=c;const a=c.parentElement;if(a){a.style.position="relative";const b=document.createElement("div");b.classList.add("autocomplete"),b.setAttribute("tabindex","0"),c.after(b),state.autoEl=b,b.addEventListener("focus",handleFocus)}c.addEventListener("input",handleInput);const b=document.querySelector("form.search-bar.w-form");b&&(b.reset(),b.addEventListener("submit",handleSubmit))}});